<h2 class="text-center">
    <img src="https://www.gravatar.com/avatar/{{ user.email_md5 }}.jpg?s=168&d=mm" class="img-circle" width="84px" height="84px"> &nbsp;&nbsp;Compte de {{ user.firstname }} {{ user.lastname }}
</h2>

<div id="candidateInterviews">

    <div class="col-md-6">
        <h3>Planifier mes entretiens</h3><hr>


        <div class="row">
            <div class="col-md-6">
                LIVE : <span class="label label-default">{{ pusherChannelMembers.count }} personne(s) connectée(s)</span>
            </div>
            <div class="col-md-6 text-right">
                <div class="form-horizontal form-group">
                    <div class="checkbox">
                        <label for="showAllCompanies">
                            <input type="checkbox" id="showAllCompanies" ng-model="showAllCompanies"> Déplier toutes les entreprises
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="showAllCompaniesWrapper">
            <div class="form-group">
                <div class="col-md-4 col-md-offset-8">

                </div>
            </div>
        </div>

        <div class="row">
            <div class="company" ng-repeat="company in companies">
                <div class="panel panel-default">
                    <div ng-click="displayCompanies[$index] = !displayCompanies[$index]"
                         class="panel-heading"
                            >
                        <h3 class="panel-title pull-left">{{ company.company.name }}</h3>
                <span class="pull-right">
                    <span class="label" ng-class="{'label-success': company.summary.remaining_percentage > 50, 'label-warning': company.summary.remaining_percentage > 0 && company.summary.remaining_percentage <= 50, 'label-danger': company.summary.remaining_percentage == 0}">
                        DISPONIBILITÉ
                    </span>
                </span>
                        <div class="clearfix"></div>
                    </div>
                    <div class="panel-body" ng-show="displayCompanies[$index] || showAllCompanies">
                        <table class="table">
                            <thead>
                            <tr>
                                <th ng-repeat="slot in slots">{{ slot.begins_at_formatted }}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td ng-repeat="interview in company.interviews"
                                    ng-click="actOnInterview(company, interview)"
                                    ng-class="{
                            available: interview.free_slots > 0 && !interview.already_registered && !interview.interview,
                            unavailable: interview.free_slots == 0,
                            takenByMe: interview.interview,
                            alreadyRegistered: interview.already_registered,
                            waiting: interview.isWaiting}"
                                        >
                                    <span ng-if="interview.already_registered">{{ interview.already_registered }}</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <h3>Mes informations</h3><hr>
        <h2>Mon CV :</h2>
        <hr/>
        <!-- Documents -->
        <form name="documentsPartForm" class="form-block" novalidate>
            <p>Il vous est vivement conseillé d'uploader un CV sur la plateforme, celui-ci sera envoyé aux recruteurs avant le Job Forum</p>
            <div class="row">
                <div ngf-drop ng-model="form.documents" class="dropbox"
                     ngf-select="true" ngf-multiple="false" ngf-allow-dir="false" ng-show="!documents.length">
                    <div class="help">
                        <span ng-if="!form.documentIsBeingSent">Glissez-déposez votre CV ou<br> cliquez ici pour le sélectionner.</span>
                        <span ng-if="form.documentIsBeingSent">Envoi en cours...</span>
                    </div>
                </div>
                <div ngf-no-file-drop>Cette fonctionnalité n'est pas disponible sur votre navigateur</div>

                <div class="panel panel-default" ng-show="documents.length">
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th>Mon CV</th>
                            <th>Etat</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="document in documents">
                            <td>{{ document.name | limitTo: 20 }}{{document.name.length > 20 ? '...' : ''}} </td>
                            <td ng-switch="document.status">
                                <span ng-switch-when="ACCEPTED" class="label label-default">Accepté</span>
                                <span ng-switch-when="PENDING" class="label label-warning">En attente</span>
                                <span ng-switch-when="REJECTED" class="label label-alert">Refusé</span>
                            </td>
                            <td class="pull-right">
                                <button type="button" class="btn btn-success" ng-click="downloadDocument(document)"><span class="glyphicon glyphicon-edit"></span> Telecharger</button>
                                <button type="button" class="btn btn-danger" ng-click="deleteDocument(document)"><span class="glyphicon glyphicon-trash"></span> Supprimer</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </form>
    </div>


</div>

