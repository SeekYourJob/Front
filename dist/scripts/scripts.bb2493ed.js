"use strict";var cvsApp=angular.module("cvsApp",["config","ui.router","angular-jwt","ngFileUpload","ui.bootstrap","ngStorage","smart-table","restangular","ngSanitize","ui.select","oitozero.ngSweetAlert","pusher-angular","angular-google-analytics"]);cvsApp.config(["$httpProvider","jwtInterceptorProvider",function(a,b){b.tokenGetter=["jwtHelper","$http","config","$window","$localStorage","AuthService",function(a,b,c,d,e,f){return".html"===c.url.substr(c.url.length-5)?null:f.getToken().then(function(a){return a},function(){return null})}],a.interceptors.push("jwtInterceptor")}]),cvsApp.config(["RestangularProvider","ENV",function(a,b){a.setBaseUrl(b.apiEndpoint),a.setRestangularFields({id:"ido"})}]),cvsApp.config(["uiSelectConfig",function(a){a.theme="bootstrap"}]),cvsApp.config(["AnalyticsProvider",function(a){a.setAccount("UA-41931299-11"),a.trackPages(!0),a.useDisplayFeatures(!0),a.setPageEvent("$stateChangeSuccess"),a.useEnhancedLinkAttribution(!0)}]),cvsApp.run(["$rootScope","$state","$localStorage","ENV","$window","AuthService","Analytics",function(a,b,c,d,e,f,g){g.getUrl(),f.turnOnPusher(),a.$on("$stateChangeStart",function(d,e){"undefined"!=typeof c.user&&(a.authenticated=!0,a.user=c.user,"app.login"===e.name&&(d.preventDefault(),b.go("app.account")))}),a.$on("$stateChangeError",function(a,c,d,e,f,g){g.notAuthenticated?b.go("app.login"):g.accessDenied&&b.go("app.home")}),a.$on("$stateChangeSuccess",function(){e.scrollTo(0,0)})}]),angular.module("cvsApp").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode(!0),b.when("","/"),b.otherwise("/"),a.state("app",{url:"",views:{header:{templateUrl:"views/skeleton/header.html"},footer:{templateUrl:"views/skeleton/footer.html"}}}).state("app.session",{resolve:{authentication:["AuthService","$q",function(a,b){return a.check()?void 0:b.reject({notAuthenticated:!0})}]}}).state("app.home",{url:"/",views:{"content@":{templateUrl:"views/home.html",controller:["AuthService","$state",function(a,b){a.check()&&b.go("app.account")}]}}}).state("app.login",{url:"/login",views:{"content@":{templateUrl:"views/login.html",controller:"LoginCtrl"}}}).state("app.resetPassword",{url:"/reset-password",views:{"content@":{templateUrl:"views/reset-password.html",controller:"LoginCtrl"}}}).state("app.doResetPassword",{url:"/do-reset-password?token",views:{"content@":{templateUrl:"views/do-reset-password.html",controller:"LoginCtrl"}}}).state("app.logout",{url:"/logout",parent:"app.session",views:{"content@":{template:"",controller:["$state","AuthService",function(a,b){b.logout().then(function(){a.go("app.home")})}]}}}).state("app.accessMap",{url:"/access-map",views:{"content@":{templateUrl:"views/access-map.html"}}}).state("app.participatingCompanies",{url:"/entreprises-participantes",views:{"content@":{templateUrl:"views/participating-companies.html",controller:["$scope","Restangular",function(a,b){b.all("companies?short=true").getList().then(function(b){a.companies=b.plain()})}]}}}).state("app.registerRecruiter",{url:"/register-recruiter",views:{"content@":{templateUrl:"views/register-recruiter.html",controller:"RegisterRecruiterCtrl"}}}).state("app.registerCandidate",{url:"/register-candidate",views:{"content@":{templateUrl:"views/register-candidate.html",controller:"RegisterCandidateCtrl"}}}).state("app.account",{parent:"app.session",url:"/my-account",resolve:{user:["AuthService",function(a){return a.getUser(!0)}]},views:{"content@":{templateUrl:"views/account.html",controller:["$scope","user",function(a,b){a.user=b}]}}}).state("app.admin",{"abstract":!0,parent:"app.session",url:"/admin",views:{"content@":{templateUrl:"views/admin/admin.html"},"admin-menu@app.admin":{templateUrl:"views/admin/admin-menu.html"}},resolve:{organizer:["AuthService","$q",function(a,b){return a.checkOrganizer().then(function(){},function(){return b.reject({accessDenied:!0})})}]}}).state("app.admin.home",{url:"/",views:{"admin-content@app.admin":{templateUrl:"views/admin/home.html",controller:"AdminCtrl"}}}).state("app.admin.live",{url:"/live",views:{"@":{templateUrl:"views/admin/live.html",controller:"AdminLiveCtrl",resolve:{selectedSlot:function(){return!1}}}}}).state("app.admin.live.forSlot",{url:"/{idSlot}",views:{"@":{templateUrl:"views/admin/live.html",controller:"AdminLiveCtrl",resolve:{selectedSlot:["$stateParams",function(a){return a.idSlot}]}}}}).state("app.admin.companies",{url:"/companies",views:{"admin-content@app.admin":{templateUrl:"views/admin/companies.html",controller:"AdminCompaniesCtrl"}}}).state("app.admin.companies.details",{url:"/{id}",views:{"admin-content@app.admin":{templateUrl:"views/admin/companies-details.html",controller:"AdminCompaniesDetailsCtrl"}}}).state("app.admin.recruiters",{url:"/recruiters",views:{"admin-content@app.admin":{templateUrl:"views/admin/recruiters.html",controller:"AdminRecruitersCtrl"}}}).state("app.admin.recruiters.details",{url:"/{id}",views:{"admin-content@app.admin":{templateUrl:"views/admin/recruiters-details.html",controller:"AdminRecruitersDetailsCtrl"}}}).state("app.admin.candidates",{url:"/candidates",views:{"admin-content@app.admin":{templateUrl:"views/admin/candidates.html",controller:"AdminCandidatesCtrl"}}}).state("app.admin.candidates.details",{url:"/{id}",views:{"admin-content@app.admin":{templateUrl:"views/admin/candidates-details.html",controller:"AdminCandidatesDetailsCtrl"}}}).state("app.admin.messaging",{url:"/messaging",views:{"admin-content@app.admin":{templateUrl:"views/admin/messaging.html",controller:"AdminMessagingCtrl"}}}).state("app.admin.documents",{url:"/documents",views:{"admin-content@app.admin":{templateUrl:"views/admin/documents.html",controller:"AdminDocumentsCtrl"}}}).state("app.admin.messaging.newEmail",{url:"/new-email",views:{"admin-content@app.admin":{templateUrl:"views/admin/messaging-newEmail.html",controller:"AdminMessagingNewEmailCtrl"}}}).state("app.admin.messaging.predefinedEmail",{url:"/predefined-emails",views:{"admin-content@app.admin":{templateUrl:"views/admin/messaging-predefinedEmail.html",controller:"AdminMessagingPredefinedEmailCtrl"}}}).state("app.admin.messaging.newSMS",{url:"/new-sms",views:{"admin-content@app.admin":{templateUrl:"views/admin/messaging-newSMS.html",controller:"AdminMessagingNewSMSCtrl"}}}).state("app.admin.messaging.predefinedSMS",{url:"/predefined-sms",views:{"admin-content@app.admin":{templateUrl:"views/admin/messaging-predefinedSMS.html",controller:"AdminMessagingPredefinedSMSCtrl"}}}).state("app.admin.interviews",{url:"/interviews",views:{"admin-content@app.admin":{templateUrl:"views/admin/interviews.html",controller:"AdminInterviewsCtrl"}}}).state("app.admin.locations",{url:"/locations",views:{"admin-content@app.admin":{templateUrl:"views/admin/locations.html",controller:"AdminLocationsCtrl"}}})}]),angular.module("cvsApp").service("AuthService",["$http","$rootScope","jwtHelper","$q","$localStorage","ENV","$pusher",function(a,b,c,d,e,f,g){var h=this;h.login=function(c){var g=d.defer();return a({method:"POST",url:f.apiEndpoint+"/authenticate",skipAuthorization:!0,data:c}).success(function(a){e.token=a.token,b.authenticated=!0,h.turnOnPusher(),g.resolve(a.token)}).error(function(){g.reject("Bad credentials.")}),g.promise},h.logout=function(){var c=d.defer();return a({method:"GET",url:f.apiEndpoint+"/logout"}).success(function(){delete e.token,delete e.user,delete b.user,b.authenticated=!1,c.resolve()}).error(function(){c.reject("Error while logging out")}),c.promise},h.askPasswordReset=function(b){return a({method:"POST",url:f.apiEndpoint+"/authenticate/ask-reset-password",skipAuthorization:!0,data:{email:b}})},h.doPasswordReset=function(b){return a({method:"POST",url:f.apiEndpoint+"/authenticate/do-reset-password",skipAuthorization:!0,data:b})},h.getUser=function(c){var g=f.apiEndpoint+"/me/";c===!0&&(g+="?showDetails=true");var h=d.defer();return a.get(g).success(function(a){e.user=a.user,b.user=a.user,h.resolve(a.user)}).error(function(){h.reject("Bugous user.")}),h.promise},h.getToken=function(){var a=d.defer();return null===e.token||"undefined"==typeof e.token?a.reject("No token"):c.isTokenExpired(e.token)?h.refreshToken().then(function(b){a.resolve(b)},function(){a.reject("[TOKEN] : Too old")}):a.resolve(e.token),a.promise},h.refreshToken=function(){var b=d.defer();return a({method:"POST",url:f.apiEndpoint+"/authenticate/refresh",skipAuthorization:!0,data:{oldToken:e.token}}).then(function(a){e.token=a.data.token,h.turnOnPusher(),b.resolve(a.data.token)},function(){delete e.token,delete e.user,b.reject("Token couldnt be renewed")}),b.promise},h.check=function(){return e.token},h.checkOrganizer=function(){var b=d.defer();return"undefined"==typeof e.token&&b.reject("No token"),a({method:"GET",url:f.apiEndpoint+"/authenticate/check-organizer"}).then(function(){b.resolve()},function(){b.reject("User is not an organizer")}),b.promise},h.turnOnPusher=function(){h.check()&&(b.pusher=new Pusher("9b5860d837aa56e753e6",{authEndpoint:f.apiEndpoint+"/authenticate/pusher-token",disableStats:!0,auth:{headers:{Authorization:"Bearer "+e.token}}}),b.pusherClient=g(b.pusher))}}]),angular.module("cvsApp").service("UploadService",["$http","$q","ENV","Upload",function(a,b,c,d){var e=this;e.upload=function(a,e,f){var g=b.defer(),h={};if(null!==a&&(h.user=a.ido),e&&e.constructor!==Array&&(e=[e]),e&&e.length)for(var i=0;i<e.length;i++){var j=e[i];d.upload({url:c.apiEndpoint+"/documents",file:j,data:h,sendFieldsAs:"form",skipAuthorization:!0}).success(function(b){null!==a&&"CVS\\\\Candidate"===a.profile&&(f=[]),f.push(b),g.resolve()}).error(function(a,b,c,d){g.reject("Error while uploading documents")})}return g.promise}}]),angular.module("cvsApp").controller("LoginCtrl",["$rootScope","$scope","$state","AuthService","$stateParams","SweetAlert",function(a,b,c,d,e,f){b.credentials={email:"",password:""},b.badCredentials=!1,b.passwordReset={token:e.token||!1,password:"",confirmation:""},b.login=function(){d.login(b.credentials).then(function(){d.getUser().then(function(){c.go("app.account")},function(){c.go("app.logout")})},function(){b.badCredentials=!0})},b.resetPassword=function(){d.askPasswordReset(b.credentials.email).then(function(){f.swal({html:!0,closeOnConfirm:!0,closeOnCancel:!0,title:"Message envoyé",text:"Un email permettant de réinitialiser votre mot de passe<br>vient de vous être envoyé.",type:"success"})},function(){f.swal({html:!0,title:"Échec",text:"Aucun compte trouvé.",type:"error"})})},b.doResetPassword=function(){d.doPasswordReset(b.passwordReset).then(function(){f.swal({html:!0,closeOnConfirm:!0,closeOnCancel:!0,title:"Mot de passe modifié",text:"Vous pouvez désormais vous connecter.",type:"success",timer:2e3},function(){swal.close(),c.go("app.login")})},function(){f.swal({html:!0,title:"Échec",text:"Nous n'avons pas réussi à modifier votre mot de passe.<br>Merci de vérifier votre saisie.",type:"error"})})}}]),angular.module("cvsApp").controller("AccountCandidateCtrl",["$scope","Restangular","$rootScope","UploadService","ENV","$modal",function(a,b,c,d,e,f){function g(){b.one("candidates/"+a.user.profile_ido+"/summary").get().then(function(b){a.summary=b.plain()})}function h(){b.one("interviews/candidate-by-company/"+a.user.profile_ido).get().then(function(b){a.slots=b.slots,a.companies=b.companies}),g()}var i=c.pusherClient.subscribe("presence-interviews"),j=!1;a.user=a.$parent.user,a.slots=[],a.companies=[],a.isWaiting=!1,a.displayCompanies=[],a.pusherChannelMembers=i.members,a.summary={},a.offersModalComponents={},a.documents=[],a.form={documents:!1,documentIsBeingSent:!1},h(),a.actOnInterview=function(b,c){a.isWaiting||(c.interview?a.cancelInterview(c):c.free_slots>0&&a.registerInterview(b,c))},a.registerInterview=function(c,d){a.isWaiting=!0,d.isWaiting=!0,b.one("interviews/register").customPOST({company_ido:c.company.ido,slot_ido:d.slot_ido}).then(function(){a.isWaiting=!1,h()},function(){a.isWaiting=!1,h()})},a.cancelInterview=function(c){a.isWaiting=!0,c.isWaiting=!0,b.one("interviews/"+c.interview+"/free").customPOST({}).then(function(){a.isWaiting=!1,h()},function(){a.isWaiting=!1,h()})},i.bind("interviews-updated",function(){h()}),a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,d.upload(a.user,b,a.documents),a.form.documentIsBeingSent=!1},b.one("documents/user",a.user.ido).get().then(function(b){a.documents=b.plain()}),a.deleteDocument=function(c){b.one("documents",c.ido).remove().then(function(){a.documents.splice(a.documents.indexOf(c),1)})},a.downloadDocument=function(a){b.one("documents/request-token",a.ido).get().then(function(a){window.location.assign(e.apiEndpoint+"/documents/"+a.plain().token)})},a.showCompany=function(c){b.one("companies/"+c.ido+"/offers").get().then(function(b){a.offersModalComponents.company=c,a.offersModalComponents.offers=b.plain(),j=f.open({animation:!0,templateUrl:"showCompanysOffers.html",scope:a})})}}]),angular.module("cvsApp").controller("AccountRecruiterCtrl",["$scope","Upload","ENV","Restangular","UploadService",function(a,b,c,d,e){a.user=a.$parent.user,a.accountPopover={templateUrl:"popover.html"},a.documents=[],a.form={documents:!1,documentIsBeingSent:!1},a.setSelectedAccountInterview=function(b){a.selectedAccountInterview=b},a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,e.upload(a.user,b,a.documents),a.form.documentIsBeingSent=!1},d.one("documents/user",a.user.ido).get().then(function(b){a.documents=b.plain()}),a.deleteDocument=function(b){d.one("documents",b.ido).remove().then(function(){a.documents.splice(a.documents.indexOf(b),1)})},a.downloadDocument=function(a){d.one("documents/request-token",a.ido).get().then(function(a){window.location.assign(c.apiEndpoint+"/documents/"+a.plain().token)})}}]),angular.module("cvsApp").controller("RegisterRecruiterCtrl",["$scope","$http","Upload","AuthService","$state","ENV","UploadService",function(a,b,c,d,e,f,g){a.companies=[],a.newRecruiter={user:{},recruiter:{availability:"",company:{name:"",jobTypes:{Stage:!0,Alternance:!1,Emploi:!1}},documents:[]},participantsEmails:[],participantsData:[]},a.form={others:"",emailRecruiterToAdd:"",dataRecruiterToAdd:{},documents:!1,emailAlreadyExists:!1,documentIsBeingSent:!1,isBeingSubmitted:!1,isSubmitted:!1},a.getCompanies=function(){b({method:"GET",url:f.apiEndpoint+"/companies",skipAuthorization:!0,params:{"short":!0}}).then(function(b){if("undefined"!=typeof b.data)for(var c=0;c<b.data.length;c++)a.companies.push(b.data[c].name)})},a.getCompanies(),a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.$watch("form.others",function(){a.newRecruiter.participantsEmails=[],a.newRecruiter.participantsData=[]}),a.checkDuplicateEmail=function(){b({method:"GET",url:f.apiEndpoint+"/authenticate/check-email",skipAuthorization:!0,params:{email:a.newRecruiter.user.email}}).then(function(){a.form.emailAlreadyExists=!1},function(){a.form.emailAlreadyExists=!0,a.credentialPartForm.email.$setValidity("required",!1)})},a.addRecruiterEmail=function(){"undefined"!=typeof a.form.emailRecruiterToAdd&&(a.newRecruiter.participantsEmails.push(a.form.emailRecruiterToAdd),a.form.emailRecruiterToAdd="")},a.deleteRecruiterEmail=function(b){a.newRecruiter.participantsEmails.splice(a.newRecruiter.participantsEmails.indexOf(b),1)},a.addRecruiterData=function(){var b=a.form.dataRecruiterToAdd;""!==b.firstname&&""!==b.lastname&&""!==b.email&&(a.newRecruiter.participantsData.push(a.form.dataRecruiterToAdd),a.resetDataRecruiterToAdd())},a.deleteRecruiterData=function(b){a.newRecruiter.participantsData.splice(a.newRecruiter.participantsData.indexOf(b),1)},a.resetDataRecruiterToAdd=function(){a.form.dataRecruiterToAdd={firstname:"",lastname:"",email:"",availability:"all",parkingOption:!1,lunchOption:!1}},a.resetDataRecruiterToAdd(),a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,g.upload(null,b,a.newRecruiter.recruiter.documents),a.form.documentIsBeingSent=!1},a.deleteDocument=function(b){a.newRecruiter.recruiter.documents.splice(a.newRecruiter.recruiter.documents.indexOf(b),1)},a.register=function(){a.form.isBeingSubmitted=!0,b({method:"POST",url:f.apiEndpoint+"/authenticate/register-recruiter",skipAuthorization:!0,data:a.newRecruiter}).then(function(){a.form.isSubmitted=!0,d.login({email:a.newRecruiter.user.email,password:a.newRecruiter.user.password}).then(function(){d.getUser().then(function(){e.go("app.account")},function(){})})},function(){a.form.isSubmitted=!1})},a.collaboratorsFormIsValid=function(){return a.othersPartForm.$valid&&("none"===a.form.others||"withEmails"===a.form.others&&a.newRecruiter.participantsEmails.length||"withData"===a.form.others&&a.newRecruiter.participantsData.length)},a.formsAreValid=function(){return a.credentialPartForm.$valid&&a.contactInfoPartForm.$valid&&a.availabilityPartForm.$valid&&a.collaboratorsFormIsValid()}}]),angular.module("cvsApp").controller("RegisterCandidateCtrl",["$scope","$http","Upload","AuthService","$state","ENV","UploadService",function(a,b,c,d,e,f,g){a.newCandidate={user:{},candidate:{grade:"",documents:[]}},a.grades=["L3","M1","M2","ISEN"],a.newCandidate.candidate.grade=a.grades[0],a.form={others:"",documents:!1,emailAlreadyExists:!1,documentIsBeingSent:!1,isBeingSubmitted:!1,isSubmitted:!1},a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.checkDuplicateEmail=function(){b({method:"GET",url:f.apiEndpoint+"/authenticate/check-email",skipAuthorization:!0,params:{email:a.newCandidate.user.email}}).then(function(){a.form.emailAlreadyExists=!1},function(){a.form.emailAlreadyExists=!0,a.credentialPartForm.email.$setValidity("required",!1)})},a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,g.upload(null,b,a.newCandidate.candidate.documents),a.form.documentIsBeingSent=!1},a.deleteDocument=function(b){a.newCandidate.candidate.documents.splice(a.newCandidate.candidate.documents.indexOf(b),1)},a.register=function(){a.form.isBeingSubmitted=!0,b({method:"POST",url:f.apiEndpoint+"/authenticate/register-candidate",skipAuthorization:!0,data:a.newCandidate}).then(function(){a.form.isSubmitted=!0,d.login({email:a.newCandidate.user.email,password:a.newCandidate.user.password}).then(function(){d.getUser().then(function(){e.go("app.account")},function(){})})},function(){a.form.isSubmitted=!1})},a.formsAreValid=function(){return a.credentialPartForm.$valid&&a.contactInfoPartForm.$valid}}]),angular.module("cvsApp").controller("AdminCtrl",["$scope","Restangular","$pusher","$rootScope",function(a,b,c,d,e){function f(){b.all("interviews").getList().then(function(b){a.interviewsByCompanies=b.plain()})}function g(){b.one("stats/interviews").get().then(function(b){a.stats=b.plain()})}var h=c(d.pusherClient),i=h.subscribe("presence-interviews");a.slots=!1,a.interviewsByCompanies=!1,a.selectedInterview=!1,a.stats=!1,a.pusherChannelMembers=i.members,g(),b.all("interviews/slots").getList().then(function(b){a.slots=b.plain(),f()}),a.setSelectedInterview=function(b){a.selectedInterview=b},i.bind("interviews-updated",function(a){f()})}]),angular.module("cvsApp").controller("AdminCompaniesCtrl",["$scope","Restangular",function(a,b){a.companiesCollection=b.all("companies").getList().$object,a.companiesDisplayedCollection=[].concat(a.companiesCollection)}]),angular.module("cvsApp").controller("AdminCompaniesDetailsCtrl",["$scope","$state","Restangular",function(a,b,c){a.$watch("company.name",function(b,c){"undefined"!=typeof b&&"undefined"!=typeof c&&""!==c&&a.update()}),c.one("companies",b.params.id).get().then(function(b){a.company=b}),c.one("companies",b.params.id).getList("recruiters").then(function(b){a.recruiters=b}),a.update=function(){a.company.put()}}]),angular.module("cvsApp").controller("AdminRecruitersCtrl",["$scope","Restangular","$state","ENV","AuthService",function(a,b,c,d,e){b.all("recruiters").getList().then(function(b){a.recruitersCollection=b,a.recruitersDisplayedCollection=[].concat(a.recruitersCollection)}),a.$watch("recruitersDisplayedCollection",function(a){Array.isArray(a)&&1===a.length&&c.go("app.admin.recruiters.details",{id:a[0].ido})}),a.downloadRecruitersSchedules=function(){e.getToken().then(function(a){window.location.assign(d.apiEndpoint+"/recruiters/download-schedules?token="+a)})}}]),angular.module("cvsApp").controller("AdminRecruitersDetailsCtrl",["$scope","$state","Restangular","Upload","ENV","$modal","UploadService",function(a,b,c,d,e,f,g){function h(){c.one("interviews/recruiter",a.recruiter.ido).get().then(function(b){a.recruiterInterviews=b.plain()})}function i(){c.one("documents/user",a.user.ido).get().then(function(b){a.documents=b.plain()})}function j(){c.one("locations").get().then(function(b){a.locations=b.plain()})}var k=!1;a.recruiter={},a.user={},a.companies=[],a.recruiterInterviews={},a.documents=[],a.locations=[],a.newLocationForAllInterviews={},a.slots=[],a.selected={},a.availableCandidates=[],a.form={documents:!1,documentIsBeingSent:!1},j(),c.one("recruiters",b.params.id).get().then(function(b){a.recruiter=b,a.user=b.user,i(),h()}),c.all("companies").getList().then(function(b){a.companies=b}),a.updateRecruiter=function(){a.recruiter.put()},a.freeInterview=function(a){c.one("interviews",a.ido).customPOST(void 0,"free").then(function(){h()})},a.deleteInterview=function(a){c.one("interviews",a.ido).remove().then(function(){h()})},a.createInterview=function(b){c.all("interviews").customPOST({slot:b.slot.ido,recruiter:a.recruiter.ido}).then(function(){h()})},a.bookInterview=function(b){a.selected.slot=b.slot,c.one("interviews/candidates-available-for-slot-and-company").get({idoSlot:b.slot.ido,idoCompany:a.recruiter.company.ido}).then(function(b){a.availableCandidates=b.plain().candidates,a.slots=b.plain().slots,k=f.open({animation:!0,templateUrl:"selectStudentForInterviewModal.html",scope:a})})},a.doBookInterview=function(){c.one("interviews/register").customPOST({slot_ido:a.selected.slot.ido,company_ido:a.recruiter.company.ido,recruiter_ido:a.recruiter.ido,candidate_ido:a.selected.availableCandidate.ido}).then(function(a){h(),k.close()},function(a){alert(a)})},a.updateLocationForInterview=function(a,b){b=JSON.parse(b),c.one("locations/update-interview/"+a.ido).customPUT({idoLocation:a.location?a.location.ido:"NONE"}).then(function(a){h()},function(c){alert("Cet emplacement est déjà occupé !"),a.location=b.location,h()})},a.updateLocationForAllInterviews=function(){c.one("locations/update-recruiter/"+a.recruiter.ido).customPUT({idoLocation:a.newLocationForAllInterviews?a.newLocationForAllInterviews.ido:"NONE"}).then(function(a){h()},function(a){alert("Certains emplacements sont déjà attribués !"),h()})},a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,g.upload(a.user,b,a.documents),a.form.documentIsBeingSent=!1},a.deleteDocument=function(b){c.one("documents",b.ido).remove().then(function(){a.documents.splice(a.documents.indexOf(b),1)})},a.downloadDocument=function(a){c.one("documents/request-token",a.ido).get().then(function(a){window.location.assign(e.apiEndpoint+"/documents/"+a.plain().token)})}}]),angular.module("cvsApp").controller("AdminCandidatesCtrl",["$scope","Restangular","$state",function(a,b,c){b.all("candidates").getList().then(function(b){a.candidatesCollection=b,a.candidatesDisplayedCollection=[].concat(a.candidatesCollection)}),a.$watch("candidatesDisplayedCollection",function(a){Array.isArray(a)&&1===a.length&&c.go("app.admin.candidates.details",{id:a[0].ido})})}]),angular.module("cvsApp").controller("AdminCandidatesDetailsCtrl",["$scope","$state","Restangular","Upload","ENV","UploadService",function(a,b,c,d,e,f){function g(){c.one("documents/user",a.user.ido).get().then(function(b){a.documents=b.plain()})}function h(){c.one("interviews/candidate",a.candidate.ido).get().then(function(b){a.candidateSlots=b.plain()})}a.candidate={},a.user={},a.documents=[],a.candidateSlots={},a.grades=["L3","M1","M2","ISEN"],a.form={documents:!1,documentIsBeingSent:!1},a.updateCandidate=function(){a.candidate.put()},c.one("candidates",b.params.id).get().then(function(b){a.candidate=b,a.user=b.user,g(),h()}),a.$watch("form.documents",function(){a.uploadDocuments(a.form.documents)}),a.uploadDocuments=function(b){a.form.documentIsBeingSent=!0,f.upload(a.user,b,a.documents),a.form.documentIsBeingSent=!1},a.deleteDocument=function(b){c.one("documents",b.ido).remove().then(function(){a.documents.splice(a.documents.indexOf(b),1)})},a.downloadDocument=function(a){c.one("documents/request-token",a.ido).get().then(function(a){window.location.assign(e.apiEndpoint+"/documents/"+a.plain().token)})},a.freeInterview=function(a){c.one("interviews",a.ido).customPOST(void 0,"free").then(function(){h()})},a.formatDate=function(a){return new Date(a)}}]),angular.module("cvsApp").controller("AdminDocumentsCtrl",["$scope","Restangular","ENV",function(a,b,c){a.documentsCollection=[],b.one("documents/candidates").get().then(function(b){a.documentsCollection=b.plain()}),a.refuseDocument=function(c){b.one("documents/"+c.ido+"/refuse").post().then(function(){a.documentsCollection.splice(a.documentsCollection.indexOf(c),1)})},a.acceptDocument=function(c){b.one("documents/"+c.ido+"/accept").post().then(function(){a.documentsCollection.splice(a.documentsCollection.indexOf(c),1)})},a.downloadDocument=function(a){b.one("documents/request-token",a.ido).get().then(function(a){window.location.assign(c.apiEndpoint+"/documents/"+a.plain().token)})}}]),angular.module("cvsApp").controller("AdminMessagingCtrl",["$scope",function(a){a.lastEmails=[],a.lastSMS=[]}]),angular.module("cvsApp").controller("AdminMessagingNewEmailCtrl",["$scope","Restangular","SweetAlert",function(a,b,c){function d(){a.sendingType="toUsers",a.selected={users:[],groups:[]},a.message={object:"",content:""}}a.users=[],a.groups=[],d(),b.one("users/emails").get().then(function(b){a.users=b.plain()}),b.one("users/groups").get().then(function(b){a.groups=b.plain()}),a.canBeSent=function(){return""!==a.message.object&&""!==a.message.content&&(a.selected.users.length||a.selected.groups.length)},a.sendEmail=function(){c.swal({html:!0,title:"Êtes-vous certain ?",text:"Votre message est sur le point d'être envoyé.<br>Souhaitez-vous poursuivre ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#00C853",confirmButtonText:"Oui, envoyer !",cancelButtonText:"Non, annuler",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?b.all("messaging/send-email").customPOST({sendingType:a.sendingType,selection:a.selected,message:a.message}).then(function(a){c.swal("Message envoyé !","Votre message a bien été envoyé.","success"),d()},function(a){c.swal({html:!0,title:"Échec de l'envoi",text:"Une erreur est survenue pendant l'envoi du message.<br>Merci de réessayer dans quelques instants...",type:"error"})}):c.swal("Envoi annulé","Soyez sans crainte, l'envoi a bien été annulé.","error")})}}]),angular.module("cvsApp").controller("AdminMessagingPredefinedEmailCtrl",["$scope","Restangular","SweetAlert",function(a,b,c){a.predefinedEmails=[],b.one("messaging/predefined-emails").get().then(function(b){a.predefinedEmails=b.plain()}),a.sendPredefinedEmail=function(a){c.swal({html:!0,title:"Êtes-vous certain ?",text:"Votre message est sur le point d'être envoyé.<br>Souhaitez-vous poursuivre ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#00C853",confirmButtonText:"Oui, envoyer !",cancelButtonText:"Non, annuler",closeOnConfirm:!1,closeOnCancel:!1},function(d){d?b.all("messaging/send-predefined-email").customPOST({predefinedEmailKey:a}).then(function(a){c.swal("Message envoyé !","Votre message a bien été envoyé.","success")},function(a){c.swal({html:!0,title:"Échec de l'envoi",text:"Une erreur est survenue pendant l'envoi du message.<br>Merci de réessayer dans quelques instants...",type:"error"})}):c.swal("Envoi annulé","Soyez sans crainte, l'envoi a bien été annulé.","error")})}}]),angular.module("cvsApp").controller("AdminMessagingNewSMSCtrl",["$scope","Restangular","SweetAlert","$filter",function(a,b,c,d){function e(){a.sendingType="toUsers",a.selected={users:[],groups:[]},a.message=""}function f(){if("toUsers"===a.sendingType)return a.selected.users.length.toFixed(4);if("toGroups"===a.sendingType){for(var b=0,c=0;c<a.selected.groups.length;c++)b+=a.selected.groups[c].length;return b.toFixed(4)}}function g(){return.0528*f()}a.users=[],a.groups=[],a.remainingSMSCredits={},e(),b.one("users/phone-numbers").get().then(function(b){a.users=b.plain()}),b.one("users/groups").get().then(function(b){a.groups=b.plain()}),b.one("messaging/remaining-sms-credits").get().then(function(b){a.remainingSMSCredits=b.plain()}),a.canBeSent=function(){return""!==a.message&&(a.selected.users.length||a.selected.groups.length)},a.sendSMS=function(){a.remainingSMSCredits.remaining_sms>f()?c.swal({html:!0,title:"Êtes-vous certain ?",text:"Votre message est sur le point d'être envoyé.<br>Souhaitez-vous poursuivre ?<br><br><strong>Cet envoi consommera "+d("number")(f(),0)+" crédits sur vos "+a.remainingSMSCredits.remaining_sms+" restants.</strong><br>Le coût estimé de cet envoi est de "+d("number")(g(),3).toLocaleString()+" &euro;",type:"warning",showCancelButton:!0,confirmButtonColor:"#00C853",confirmButtonText:"Oui, envoyer !",cancelButtonText:"Non, annuler",closeOnConfirm:!1,closeOnCancel:!1},function(d){d?b.all("messaging/send-sms").customPOST({sendingType:a.sendingType,selection:a.selected,message:a.message}).then(function(a){c.swal("Message envoyé !","Votre message a bien été envoyé.","success"),e()},function(a){c.swal({html:!0,title:"Échec de l'envoi",text:"Une erreur est survenue pendant l'envoi du message.<br>Merci de réessayer dans quelques instants...",type:"error"})}):c.swal("Envoi annulé","Soyez sans crainte, l'envoi a bien été annulé.","error")}):c.swal({html:!0,title:"Envoi impossible !",text:"Cet envoi requiert "+d("number")(f(),0)+" crédit(s)<br>et votre compte n'en dispose que de "+a.remainingSMSCredits.remaining_sms+".",type:"error"})}}]),angular.module("cvsApp").controller("AdminMessagingPredefinedSMSCtrl",["$scope","Restangular","SweetAlert",function(a,b,c){a.predefinedSMSs=[],b.one("messaging/predefined-sms").get().then(function(b){a.predefinedSMSs=b.plain()}),a.sendPredefinedSMS=function(a){c.swal({html:!0,title:"Êtes-vous certain ?",text:"Votre message est sur le point d'être envoyé.<br>Souhaitez-vous poursuivre ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#00C853",confirmButtonText:"Oui, envoyer !",cancelButtonText:"Non, annuler",closeOnConfirm:!1,closeOnCancel:!1},function(d){d?b.all("messaging/send-predefined-sms").customPOST({predefinedSMSKey:a}).then(function(a){c.swal("Message envoyé !","Votre message a bien été envoyé.","success")},function(a){c.swal({html:!0,title:"Échec de l'envoi",text:"Une erreur est survenue pendant l'envoi du message.<br>Merci de réessayer dans quelques instants...",type:"error"})}):c.swal("Envoi annulé","Soyez sans crainte, l'envoi a bien été annulé.","error")})}}]),angular.module("cvsApp").controller("AdminInterviewsCtrl",["$scope","ENV","$http","$interval",function(a,b,c,d){function e(){c({method:"GET",url:b.apiEndpoint+"/interviews/slots"}).then(function(b){a.slots=b.data},function(a){})}function f(){c({method:"GET",url:b.apiEndpoint+"/locations/interviews-for-current-slot/",params:{sortBy:"LOCATION"}}).then(function(b){a.locationWithInterviews=b.data,a.haveInterviews=!0})}function g(d){c({method:"GET",url:b.apiEndpoint+"/locations/interviews-for-slot/"+d.ido,params:{sortBy:"LOCATION"}}).then(function(b){a.locationWithInterviews=b.data,a.haveInterviews=!0},function(a){alert("Could not getLocationsWithInterviewForSlot()")})}function h(){c({method:"GET",url:b.apiEndpoint+"/locations/missing"}).then(function(b){a.interviewsWithoutLocation=b.data},function(a){alert("Could not getInterviewsWithoutLocation()")})}a.slots=[],a.locationWithInterviews={},a.selectedSlot={},a.haveInterviews=!1,
a.interviewsWithoutLocation=!1,d(function(){a.selectedSlot.ido||f()},6e4),e(),f(),h(),a.displayLocationsWithInterviewsForSelectedSlot=function(){return a.selectedSlot?void g(a.selectedSlot):void(a.selectedSlot={})},a.toggleStatusInterview=function(a){c({method:"POST",url:b.apiEndpoint+"/interviews/"+a.ido+"/toggle-status"}).then(function(){"IN_PROGRESS"===a.status?a.status="COMPLETED":a.status="IN_PROGRESS"},function(a){alert("Could not toggleStatusInterview()")})}}]),angular.module("cvsApp").controller("AdminLocationsCtrl",["$scope","ENV","$http",function(a,b,c){function d(){c({method:"GET",url:b.apiEndpoint+"/locations/missing"}).then(function(b){a.interviewsWithoutLocation=b.data},function(a){alert("Could not getInterviewsWithoutLocation()")})}function e(){c({method:"GET",url:b.apiEndpoint+"/locations/bookings"}).then(function(b){a.bookings=b.data},function(a){alert("Could not getBookings()")})}a.interviewsWithoutLocation=!1,a.bookings=!1,d(),e()}]),angular.module("cvsApp").controller("AdminLiveCtrl",["$scope","$http","ENV","$interval","$rootScope","selectedSlot",function(a,b,c,d,e,f){function g(){d(function(){a.now=new Date},6e4)}function h(){f?k(f):j()}function i(){d(function(){f||j()},3e4)}function j(){b({method:"GET",url:c.apiEndpoint+"/locations/interviews-for-current-slot/",params:{sortBy:"COMPANY"}}).then(function(b){a.apiInterviews=b.data})}function k(d){b({method:"GET",url:c.apiEndpoint+"/locations/interviews-for-slot/"+d,params:{sortBy:"COMPANY"}}).then(function(b){a.apiInterviews=b.data})}a.now=new Date,a.apiInterviews=[];var l=e.pusherClient.subscribe("live-interviews");l.bind("interviews-updated",function(){h()}),g(),h(),i()}]),angular.module("cvsApp").run(["$templateCache",function(a){a.put("views/access-map.html",'<div class="row"> <div class="col-md-10 col-md-offset-1"> <h2>Plan d\'accès aux locaux de la FGES</h2> <hr> <p class="text-center lead"> Le Job Forum se tiendra dans les locaux des Masters du Rizomm de la FGES situés<br>au <strong>41 rue du Port à Lille (4e étage)</strong>. </p> <div class="text-center" style="margin-left: auto; margin-right: auto"> <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2530.6939838428502!2d3.043018315653553!3d50.632801382089816!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNTDCsDM3JzU4LjEiTiAzwrAwMic0Mi44IkU!5e0!3m2!1sfr!2sfr!4v1454537196861" width="800" height="420" frameborder="0" style="border:0" allowfullscreen></iframe> </div> <h3>Accès</h3> <div class="row"> <div class="col-md-6"> <p> <strong>PAR LE MÉTRO</strong> :<br> Des gares Lille Flandres ou Lille Europe, prendre le métro ligne 2, direction Saint Philibert. Arrêt Cormontaigne, puis 10 min. de marche à pied en direction du boulevard Vauban. </p> <p> <strong>PAR LA ROUTE</strong> :<br> En provenance de l\'autoroute de Paris (A1), Gand (A22), Bruxelles (A27) : périphérique direction Dunkerque par l\'autoroute, sortie n°4.<br> En provenance de l\'autoroute de Dunkerque (A25), sortie n°5. </p> <p> <strong>A VÉLO :</strong><br> Vous trouverez 6 stations V’Lille à moins de 500 mètres du campus parmi les 110 stations de la Communauté Urbaine de Lille. Le campus est équipé de plus de 900 emplacements vélo pour attacher votre vélo personnel. </p> </div> <div class="col-md-6"> <p> <strong>PAR LE BUS :</strong><br> Le campus est desservi par 4 lignes de bus avec passages réguliers :<br> Ligne 12, direction Haubourdin Le Parc (arrêt Université Catholique de Lille, boulevard Vauban)<br> Ligne 72 (arrêt Université Catholique de Lille, boulevard Vauban)<br> La Citadine (Rue du Port)<br> et la Liane 1 (Champs de Mars)<br><br> Un distributeur automatique de titres Transpole est à votre disposition au centre du campus (Hall de l’Hôtel Académique).<br> Plus d’infos : <a href="http://www.transpole.fr">www.transpole.fr</a>. </p> </div> </div> </div> </div>'),a.put("views/account.html",'<div ng-if="user.profile === \'CVS\\\\Candidate\'" ng-include src="\'views/accountCandidate.html\'" ng-controller="AccountCandidateCtrl"> </div> <div ng-if="user.profile === \'CVS\\\\Recruiter\'" ng-include src="\'views/accountRecruiter.html\'" ng-controller="AccountRecruiterCtrl"> </div>'),a.put("views/accountCandidate.html",'<h2 class="text-center"> <img src="https://www.gravatar.com/avatar/{{ user.email_md5 }}.jpg?s=168&d=mm" class="img-circle" width="84px" height="84px"> &nbsp;&nbsp;Compte de {{ user.firstname }} {{ user.lastname }} </h2> <div id="candidateInterviews"> <div class="col-md-8 col-md-offset-2" style="margin-top: 21px" ng-if="user.candidate.canRegisterToInterviews"> <h3><i class="fa fa-calendar-check-o fa-fw"></i> Mes entretiens</h3><hr> <p class="lead text-center" ng-if="!summary.count"> Aucun entretien de prévu </p> <table id="summaryCandidate" class="table" ng-if="summary.count"> <thead> <tr> <th style="width: {{ (1 / summary.summary.length) * 100 }}%" ng-repeat="sum in summary.summary">{{ sum.slot.begins_at_formatted }}</th> </tr> </thead> <tbody> <tr> <td ng-repeat="sum in summary.summary" ng-class="{hasInterview: sum.interview}"> <span ng-if="sum.interview"><strong>{{ sum.interview.company.name }}</strong></span> </td> </tr> </tbody> </table> </div> <div class="col-md-12" style="margin-top: 21px; margin-bottom: 42px" ng-if="user.candidate.canRegisterToInterviews"> <h3><i class="fa fa-calendar-plus-o fa-fw"></i> Planifier mes entretiens</h3><hr> <div class="row"> <div class="col-md-6 col-md-offset-6 text-right"> <div class="form-horizontal form-group" style="margin-bottom: 20px"> <div class="checkbox"> <label for="showAllCompanies"> <input type="checkbox" id="showAllCompanies" ng-model="showAllCompanies"> Déplier toutes les entreprises </label> </div> </div> </div> </div> <div class="row"> <div ng-repeat="company in companies" ng-class="{clearfix: ($index - 1) % 2 == 0}"> <div class="company"> <div class="panel {{ company.hasInterviewWithCandidate ? \'panel-success\' : \'panel-default\' }}"> <div ng-click="displayCompanies[$index] = !displayCompanies[$index]" analytics-on="click" analytics-event="Toggled" analytics-category="Interviews" analytics-label="{{ company.company.name }}" class="panel-heading"> <h3 class="panel-title pull-left">{{ company.company.name }}</h3> <span class="pull-right"> <span class="label" ng-class="{\'label-success\': company.summary.remaining_percentage > 50, \'label-warning\': company.summary.remaining_percentage > 0 && company.summary.remaining_percentage <= 50, \'label-danger\': company.summary.remaining_percentage == 0}"> DISPONIBILITÉ </span> </span> <div class="clearfix"></div> </div> <div class="panel-body" ng-show="displayCompanies[$index] || showAllCompanies"> <table class="table"> <thead> <tr> <th ng-repeat="slot in slots">{{ slot.begins_at_formatted }}</th> </tr> </thead> <tbody> <tr> <td ng-repeat="interview in company.interviews" ng-click="actOnInterview(company, interview)" ng-class="{\n                                        available: interview.free_slots > 0 && !interview.already_registered && !interview.interview,\n                                        unavailable: interview.free_slots == 0,\n                                        takenByMe: interview.interview,\n                                        alreadyRegistered: interview.already_registered,\n                                        waiting: interview.isWaiting}"> <span ng-if="interview.already_registered">{{ interview.already_registered }}</span> </td> </tr> </tbody> <tfoot> <tr> <td colspan="{{ slots.length / 2 }}"> <small> <span ng-repeat="(jobType, activated) in company.company.job_types" ng-class="{\'text-success\': activated, \'text-danger\': !activated}"> <i class="fa fa-fw {{ activated ? \'fa-check\' : \'fa-times\' }}"></i> {{ jobType }} &nbsp;&nbsp;&nbsp; </span> </small> </td> <td colspan="{{ slots.length / 2 }}" class="text-right"> <small> <a href="javascript:void(0);" ng-click="showCompany(company.company);">En savoir plus sur {{ company.company.name }}...</a> </small> </td> </tr> </tfoot> </table> </div> </div> </div> </div> </div> </div> <div class="col-md-8 col-md-offset-2"> <h3><i class="fa fa-file-text-o fa-fw"></i> Mon CV</h3><hr> <!-- Documents --> <form name="documentsPartForm" class="form-block" novalidate> <div class="alert alert-warning text-center" ng-if="!user.candidate.canRegisterToInterviews"> <p> <strong>Vous devez soumettre un CV valide avant de pouvoir vous inscrire à des entretiens.</strong><br> Vous serez prévenu par email dès qu\'il sera validé et pourrez dès lors procéder aux inscriptions. </p> </div> <div class="row"> <div class="col-md-12"> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="false" ngf-allow-dir="false" ngf-accept="\'application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" ng-if="!documents.length"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez votre CV ou cliquez ici...<br> (formats .doc, .docx et .pdf acceptés)</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> <div class="panel panel-default" ng-if="documents.length"> <table class="table table-striped table-hover"> <thead> <tr> <th>Mon CV</th> <th>Etat</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="document in documents"> <td style="vertical-align: middle">{{ document.name | limitTo: 20 }}{{document.name.length > 20 ? \'...\' : \'\'}} </td> <td style="vertical-align: middle" ng-switch="document.status"> <span ng-switch-when="ACCEPTED" class="label label-success">ACCEPTÉ</span> <span ng-switch-when="PENDING" class="label label-warning">EN ATTENTE DE VALIDATION</span> <span ng-switch-when="REJECTED" class="label label-danger">REFUSÉ</span> </td> <td style="vertical-align: middle" class="text-right"> <button type="button" class="btn btn-primary" ng-click="downloadDocument(document)"><i class="fa fa-download fa-fw"></i></button> <button type="button" class="btn btn-danger" ng-click="deleteDocument(document)"><i class="fa fa-trash-o"></i></button> </td> </tr> </tbody> </table> </div> </div> </div> </form> </div> </div> <script type="text/ng-template" id="showCompanysOffers.html"><div class="modal-header">\n        <h3 class="modal-title">\n            {{ offersModalComponents.company.name }}\n        </h3>\n    </div>\n    <div id="showCompanyModal" class="modal-body">\n\n        <img ng-if="offersModalComponents.company.logo_path"\n             ng-src="{{ offersModalComponents.company.logo_path }}" class="img-rounded pull-right" height="120px" />\n\n        <h4>Site internet</h4>\n        <p>\n            <a href="{{ offersModalComponents.company.website }}">{{ offersModalComponents.company.website }}</a>\n        </p>\n\n        <h4>Présentation</h4>\n        <p ng-if="offersModalComponents.company.description">Présentation ici...</p>\n        <p ng-if="!offersModalComponents.company.description">Aucune présentation.</p>\n\n        <h4>Offres proposées</h4>\n        <p ng-if="!offersModalComponents.offers.length">Aucune offre.</p>\n        <table class="table" ng-if="offersModalComponents.offers.length">\n            <tbody>\n            <tr ng-repeat="offer in offersModalComponents.offers">\n                <td style="vertical-align: middle;">{{ offer.name }} <em>({{ offer.size_readable }})</em></td>\n                <td  style="vertical-align: middle; text-align: right;">\n                    <button class="btn btn-primary" ng-click="downloadDocument(offer);"><i class="fa fa-download fa-fw"></i> Télécharger</button>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div></script>'),a.put("views/accountRecruiter.html",'<h2 class="text-center" style="margin-bottom: 0"><img src="https://www.gravatar.com/avatar/{{ user.email_md5 }}.jpg?s=168&d=mm" class="img-circle" width="84px" height="84px"> &nbsp;&nbsp;Compte de {{ user.firstname }} {{ user.lastname }}</h2> <h3 class="text-center" style="margin-left: 90px; margin-top: -12px">{{ user.recruiter.company.name }}</h3> <div id="account-display-interviews"> <h3>Entretiens prévus</h3> <hr> <div class="panel panel-default"> <div class="panel-body"> <table class="table"> <thead> <tr> <th ng-repeat="interwiew in user.recruiter.interviews" style="width:{{ (1 / user.recruiter.interviews.length) * 100 }}%">{{interwiew.slot.begins_at}}</th> </tr> </thead> <tbody> <tr> <td ng-repeat="interview in user.recruiter.interviews" class="interview interview-status-{{interview.status}}"> <a href="javascript:void(0);" ng-if="interview.candidate && interview.candidate.curriculum != \'\'" ng-click="downloadDocument(interview.candidate.curriculum)">{{interview.candidate.firstname | limitTo:1}}. {{interview.candidate.lastname}}</a> <div ng-if="interview.candidate && interview.candidate.curriculum == \'\'">{{interview.candidate.firstname | limitTo:1}}. {{interview.candidate.lastname}}</div> </td> </tr> </tbody> </table> </div> </div> </div> <div class="row"> <div class="col-md-6"> <h3>Informations</h3> <hr> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">Adresse e-mail :</label> <div class="col-sm-7"> <input type="email" class="form-control" ng-model="user.email" disabled> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Prénom :</label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="user.firstname" disabled> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Nom :</label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="user.lastname" disabled> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Téléphone :</label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="user.phone" disabled> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Notifications :</label> <div class="col-sm-7"> <div class="checkbox"> <label> <input type="checkbox" ng-model="user.notifications.email" disabled>par email </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="user.notifications.email" disabled>par SMS (le jour de l\'évènement) </label> </div> </div> </div> <p class="text-center" style="margin-top: 34px; display: none"> <button class="btn btn-success" disabled>Enregistrer</button> </p> </form> </div> <div class="col-md-6"> <h3>Fichiers envoyés</h3> <hr> <form name="documentsPartForm" class="form-block" novalidate> <p>Utilisez cet espace pour envoyer des offres que nous pourrons transmettre aux candidats (formats .doc, .docx et .pdf acceptés).</p> <div class="row" style="margin-top: 20px"> <div class="col-md-12"> <div class="panel panel-default" ng-show="documents.length"> <table class="table table-striped table-hover"> <thead> <tr> <th>Documents</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="document in documents"> <td style="vertical-align: middle">{{ document.name | limitTo: 30 }}{{document.name.length > 30 ? \'...\' : \'\'}} </td> <td class="text-right"> <button type="button" class="btn btn-success" ng-click="downloadDocument(document)"><i class="fa fa-download fa-fw"></i> Télécharger</button> <button type="button" class="btn btn-danger" ng-click="deleteDocument(document)"><i class="fa fa-trash-o fa-fw"></i> Supprimer</button> </td> </tr> </tbody> </table> </div> </div> <div class="col-md-12"> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="true" ngf-allow-dir="false" ngf-accept="\'application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\'"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez vos documents ou<br> cliquez ici pour les sélectionner.</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> </div> </div> </form> </div> </div> <script type="text/ng-template" id="popover.html"><p>\n         <strong>{{ selectedAccountInterview.candidate.firstname }} {{ selectedAccountInterview.candidate.lastname }}</strong> ({{selectedAccountInterview.candidate.grade }})\n     </p></script>'),a.put("views/admin/admin-menu.html",'<ul> <li role="presentation" ui-sref-active="active" title="Accueil"><a ui-sref="app.admin.home"><i class="fa fa-home fa-fw"></i> Accueil</a></li> <!--<li role="presentation" ui-sref-active="active" title="Entreprises"><a ui-sref="app.admin.companies"><i class="fa fa-building-o fa-fw"></i> Entreprises</a></li>--> <li role="presentation" ui-sref-active="active" title="Recruteurs"><a ui-sref="app.admin.recruiters"><i class="fa fa-users fa-fw"></i> Recruteurs</a></li> <li role="presentation" ui-sref-active="active" title="Candidats"><a ui-sref="app.admin.candidates"><i class="fa fa-graduation-cap fa-fw"></i> Étudiants</a></li> <li role="presentation" ui-sref-active="active" title="Documents"><a ui-sref="app.admin.documents"><i class="fa fa-file-o fa-fw"></i> Curriculums</a></li> <li role="presentation" ui-sref-active="active" title="Entretiens"><a ui-sref="app.admin.locations"><i class="fa fa-location-arrow fa-fw"></i> Emplacements</a></li> <li role="presentation" ui-sref-active="active" title="Entretiens"><a ui-sref="app.admin.interviews"><i class="fa fa-commenting-o fa-fw"></i> Entretiens</a></li> <li role="presentation" ui-sref-active="active" title="Messagerie"><a ui-sref="app.admin.messaging"><i class="fa fa-envelope-o fa-fw"></i> Messagerie</a></li> <li role="presentation" ui-sref-active="active" title="En direct"><a ui-sref="app.admin.live"><i class="fa fa-television fa-fw"></i> En direct</a></li> </ul>'),a.put("views/admin/admin.html",'<p class="for-printing"><small>Job Forum SeekYourJob de la FGES</small></p> <div class="row"> <div ui-view="admin-menu" id="admin-menu"></div> </div> <div class="row"> <div ui-view="admin-content" id="admin-content"></div> </div> <p class="for-printing"> <small> <strong>Usage strictement réservé aux organisateurs de l\'évènement</strong><br> Réalisation web par Valentin Polo & Nicolas Ducom </small> </p>'),a.put("views/admin/candidates-details.html",'<h2><strong>{{ user.firstname }} {{ user.lastname }}</strong></h2> <div class="row"> <div class="col-md-7"> <h3>Entretiens</h3> <hr> <table id="admin-display-interviews" class="table"> <thead> <tr> <th style="width: 20%">Créneau</th> <th style="width: 40%">Recruteur</th> <th style="width: 20%">Compagnie</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="slot in candidateSlots" class="interview interview-status-{{slot.interviews.length > 0 ? \'taken\' : \'free\'}}"> <td> {{ formatDate(slot.begins_at) | date:\'HH:mm\' }} <i class="fa fa-arrow-right fa-fw"></i> {{ formatDate(slot.ends_at) | date:\'HH:mm\' }} </td> <td> <span ng-if="slot.interviews.length > 0"> <a ui-sref="app.admin.recruiters.details({id: slot.interviews[0].recruiter.ido})">{{ slot.interviews[0].recruiter.user.firstname }} {{ slot.interviews[0].recruiter.user.lastname }}</a> </span> <p ng-if="interview.status === \'free\'" class="text-center"></p> </td> <td> <a ui-sref="app.admin.companies.details({id: slot.interviews[0].recruiter.company.ido})">{{slot.interviews[0].recruiter.company.name}}</a> </td> <td class="actions"> <button type="button" class="btn btn-sm btn-danger" ng-if="slot.interviews.length > 0 " ng-click="freeInterview(slot.interviews[0])"><i class="fa fa-times fa-fw"></i> Désinscrire l\'étudiant </button> </td> </tr> </tbody> </table> </div> <div class="col-md-5"> <h3>Informations</h3> <hr> <form name="documentsPartForm" class="form-block" novalidate style="margin-bottom: 42px"> <div class="panel panel-default" ng-show="documents.length"> <table class="table table-striped table-hover"> <tbody> <tr ng-repeat="document in documents"> <td style="vertical-align: middle">{{ document.name | limitTo: 30 }}{{document.name.length > 30 ? \'...\' : \'\'}} </td> <td style="vertical-align: middle" ng-switch="document.status"> <span ng-switch-when="ACCEPTED" class="label label-success">ACCEPTÉ</span> <span ng-switch-when="PENDING" class="label label-warning">EN ATTENTE</span> <span ng-switch-when="REJECTED" class="label label-danger">REFUSÉ</span> </td> <td class="pull-right"> <button type="button" class="btn btn-primary" ng-click="downloadDocument(document)"> <i class="fa fa-download fa-fw"></i></button> <button type="button" class="btn btn-danger" ng-click="deleteDocument(document)"> <span class="fa fa-trash fa-fw"></span></button> </td> </tr> </tbody> </table> </div> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="false" ngf-allow-dir="false" ng-show="!documents.length"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez les documents ou<br> cliquez ici pour les sélectionner.</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> </form> <div class="row"> <div class="col-md-12"> <div class="row"> <div class="col-md-4"> <div class="form-group"> <label for="firstname">Prénom</label> <input type="text" class="form-control" id="firstname" ng-model="candidate.user.firstname" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="lastname">Nom</label> <input type="text" class="form-control" id="lastname" ng-model="candidate.user.lastname" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="grade">Promotion</label> <select id="grade" class="form-control" ng-model="candidate.grade" ng-options="g for g in grades"> </select> </div> </div> <div class="col-md-4"> <div class="form-group"> <label>Adresse email</label> <input type="text" class="form-control" ng-model="candidate.user.email" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label>Téléphone</label> <input type="text" class="form-control" ng-model="candidate.user.phone" ng-model-options="{debounce: 550}"> </div> </div> </div> </div> </div> <div class="row"> <p class="text-center" style="margin-top: 21px"> <button type="button" class="btn btn-success" ng-click="updateCandidate()">Enregistrer</button> </p> </div> </div> </div>'),a.put("views/admin/candidates.html",'<h2>Candidats</h2> <div class="row" st-table="candidatesDisplayedCollection" st-safe-src="candidatesCollection"> <div class="searchBox"> <input class="form-control" type="search" placeholder="Rechercher..." st-search> </div> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th style="width: 5%">Entretiens</th> <th style="width: 5%">Promo</th> <th style="width: 90%">Identité</th> </tr> </thead> <tbody> <tr ng-repeat="candidate in candidatesDisplayedCollection | orderBy:[\'grade\',\'user.lastname\']"> <td class="text-center"> <span ng-class="{\'label label-danger\': candidate.interviews.length == 0,\'label label-warning\': candidate.interviews.length < 3,\'label label-success\': candidate.interviews.length >= 3}"> {{candidate.interviews.length}} </span> </td> <td> {{candidate.grade}} </td> <td><a ui-sref="app.admin.candidates.details({id: candidate.ido})">{{candidate.user.firstname}} {{ candidate.user.lastname }}</a></td> </tr> </tbody> </table> </div> </div>'),a.put("views/admin/companies-details.html",'<h2>{{ company.name }}</h2> <div class="row"> <div class="col-md-5"> <h3>Modifier</h3> <div class="form-group"> <label for="name">Nom</label> <input type="text" class="form-control" id="name" ng-model="company.name" ng-model-options="{debounce: 420}"> </div> <button type="button" class="btn btn-success" ng-click="update()">Modifier</button> </div> <div class="col-md-7"> <h3>Recruteurs</h3> <table class="table table-hover table-striped"> <thead> <tr> <th>Identité</th> <th>Options</th> </tr> </thead> <tbody> <tr ng-repeat="recruiter in recruiters"> <td><a ui-sref="app.admin.recruiters.details({id: recruiter.ido})">{{ recruiter.user.firstname }} {{ recruiter.user.lastname }}</a></td> <td> <span class="label" ng-class="{\'label-default\': !recruiter.parking_option, \'label-success\': recruiter.parking_option}">PARKING</span> <span class="label" ng-class="{\'label-default\': !recruiter.lunch_option, \'label-success\': recruiter.lunch_option}">REPAS</span> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/admin/companies.html",'<h2>Entreprises</h2> <div class="row" st-table="companiesDisplayedCollection" st-safe-src="companiesCollection"> <div class="searchBox"> <input class="form-control" type="search" placeholder="Rechercher..." st-search> </div> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th>Nom</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="company in companiesDisplayedCollection"> <td><a ui-sref="app.admin.companies.details({id: company.ido})">{{company.name}}</a></td> <td>{{ company.recruiters.length }} recruteur(s)</td> </tr> </tbody> </table> </div> </div>'),a.put("views/admin/documents.html",'<h2>Curriculums</h2> <div class="row" st-table="documentsCollection"> <div class="col-md-12"> <div class="alert alert-success" ng-if="documentsCollection.length === 0"> <p>Aucun document à valider pour le moment !</p> </div> <table class="table table-striped" ng-if="documentsCollection.length > 0"> <thead> <tr> <th style="width: 30%">Utilisateur</th> <th style="width: 30%">CV</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="document in documentsCollection"> <td style="vertical-align: middle"><a>{{document.user.firstname}} {{ document.user.lastname }}</a></td> <td style="vertical-align: middle">{{document.name}}</td> <td class="text-right"> <button type="button" class="btn btn-primary" ng-click="downloadDocument(document)"><i class="fa fa-download fa-fw"></i> Télécharger</button> <button type="button" class="btn btn-success" ng-click="acceptDocument(document)"><i class="fa fa-check fa-fw"></i> Valider</button> <button type="button" class="btn btn-danger" ng-click="refuseDocument(document)"><i class="fa fa-times fa-fw"></i> Refuser</button> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/admin/home.html",'<div class="col-md-5 pull-left"> <p style="margin: 10px 0 0 0" ng-if="stats"> <strong>Entretiens :</strong> {{ stats.available }} disponible(s) sur {{ stats.total }}. <small>({{ stats.taken }} réservé(s))</small> </p> </div> <div class="form-horizontal"> <div class="form-group"> <div class="col-md-3 pull-right text-right"> <div class="checkbox"> <label for="hideCompanyNames"> <input type="checkbox" name="hideCompanyNames" id="hideCompanyNames" ng-model="hideCompanyNames" checked> Cacher les entreprises </label> </div> </div> </div> </div> <div class="admin-display-interviews"> <table class="table"> <thead> <tr> <th style="width: 15%"></th> <th ng-repeat="slot in slots">{{ slot.begins_at_formatted }}</th> </tr> </thead> <tbody ng-repeat-start="company in interviewsByCompanies"> <tr ng-show="!hideCompanyNames"> <th colspan="{{ 1 + slots.length}}" class="company-name">{{ company.company.name }}</th> </tr> <tr ng-repeat="recruiter in company.recruiters"> <td>&nbsp;&nbsp;&nbsp;&nbsp;<a ui-sref="app.admin.recruiters.details({id: recruiter.ido})">{{ recruiter.firstname | limitTo:1 }}. {{ recruiter.lastname }}</a></td> <td ng-repeat="interview in recruiter.interviews" class="interview interview-status-{{interview.status}}"> <a ng-if="interview.status === \'taken\'" ui-sref="app.admin.candidates.details({id: interview.candidate.ido})" ng-mouseenter="setSelectedInterview(interview)" popover-template="\'popover.html\'" popover-title="Entretien" popover-trigger="mouseenter"> {{ interview.candidate.firstname | limitTo:1 }}. {{ interview.candidate.lastname }} </a> </td> </tr> </tbody> <tfoot ng-repeat-end></tfoot> </table> </div> <script type="text/ng-template" id="popover.html"><p style="margin-bottom: 0;">\n        <i class="fa fa-graduation-cap fa-fw"></i> {{ selectedInterview.candidate.grade }}<br />\n        <i class="fa fa-location-arrow fa-fw"></i> <strong ng-if="!selectedInterview.location">Indéterminé</strong> <code ng-if="selectedInterview.location">&nbsp;{{ selectedInterview.location.name }}&nbsp;</code>\n    </p></script>'),a.put("views/admin/interviews.html",'<h2>Entretiens</h2> <div class="row" ng-if="interviewsWithoutLocation.length > 0" style="margin-bottom: 21px"> <div class="col-md-12"> <div class="alert alert-danger" role="alert"> <p class="lead text-danger text-center" style="margin-bottom: 10px"> <strong>Certains entretiens n\'ont pas d\'emplacement</strong> </p> <div class="row"> <div class="col-md-8 col-md-offset-2"> <table class="table" style="margin-bottom: 0"> <thead> <tr> <th>Horaire</th> <th>Entretien</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="interview in interviewsWithoutLocation"> <td style="vertical-align: middle">{{ interview.slot.begins_at }}</td> <td style="vertical-align: middle">{{ interview.candidate.firstname | limitTo:1 }}. {{ interview.candidate.lastname }} avec {{ interview.recruiter.firstname | limitTo:1 }}. {{ interview.recruiter.lastname }} ({{ interview.recruiter.company }})</td> <td><a class="btn btn-primary btn-sm" ui-sref="app.admin.recruiters.details({id: interview.recruiter.ido})">Attribuer</a></td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="row" style="margin-bottom: 21px"> <div class="col-md-3 col-md-offset-9"> <select class="form-control" ng-model="selectedSlot" ng-options="slot.begins_at_formatted + \' – \' + slot.ends_at_formatted for slot in slots track by slot.ido" ng-change="displayLocationsWithInterviewsForSelectedSlot()"> <option value="">Choisir un horaire...</option> </select> </div> </div> <div id="adminInterviews" class="row"> <div class="col-md-3" ng-repeat="interview in locationWithInterviews.interviews" ng-if="interview.current"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title pull-left"><code>{{ interview.location.name }}</code></h3> <p class="pull-right"> <span class="statusToToggle label label-success" ng-if="interview.current.status === \'IN_PROGRESS\'" ng-click="toggleStatusInterview(interview.current)">EN COURS</span> <span class="statusToToggle label label-danger" ng-if="interview.current.status === \'COMPLETED\'" ng-click="toggleStatusInterview(interview.current)">TERMINÉ</span> </p> <div class="clearfix"></div> </div> <div class="panel-body"> <p style="margin: 0" ng-if="interview.current"> <i class="fa fa-building-o fa-fw"></i> <strong>{{ interview.current.recruiter.company.name }}</strong><br> <i class="fa fa-user fa-fw"></i> <a ui-sref="app.admin.recruiters.details({id: interview.current.recruiter.ido})">{{ interview.current.recruiter.firstname }} {{ interview.current.recruiter.lastname }}</a><br> <i class="fa fa-graduation-cap fa-fw"></i> <span ng-if="interview.current.candidate"><a ui-sref="app.admin.candidates.details({id: interview.current.candidate.ido})">{{ interview.current.candidate.firstname }} {{ interview.current.candidate.lastname }} ({{ interview.current.candidate.grade }})</a></span> <span ng-if="!interview.current.candidate" class="text-danger"><strong>LIBRE</strong></span> </p> </div> <div class="panel-footer"> <strong>NXT :</strong> <span ng-if="interview.next.candidate"><a ui-sref="app.admin.candidates.details({id: interview.next.candidate.ido})">{{ interview.next.candidate.firstname | limitTo:1 }}. {{ interview.next.candidate.lastname }} ({{ interview.next.candidate.grade }})</a></span> <span ng-if="!interview.next.candidate" class="text-danger"><strong>LIBRE</strong></span> </div> </div> </div> </div>'),a.put("views/admin/live.html",'<div id="live" ng-class="{\'animated-background\': true}"> <div id="logo_and_clock_wrapper"> <div class="logo logo-left"> <img src="/images/live-syj-logo.f7aae944.png"> </div> <div id="clock"> {{ now | date:\'HH : mm\'}} </div> <div class="logo logo-right"> <img src="/images/live-rizomm-logo.d3a7f084.png"> </div> </div> <div id="interviews_wrapper" ng-if="apiInterviews.interviews.length"> <carousel interval="1000000000000"> <slide ng-repeat="interviews in apiInterviews.interviewsPaginated"> <!--<h4>{{ $index + 1}} sur {{ apiInterviews.interviewsPaginated.length }}</h4>--> <div class="interview_wrapper" ng-repeat="interview in interviews" ng-if="interview.current"> <div class="interview" ng-class="{\'panel-success\': interview.current.status === \'COMPLETED\' || !interview.current.candidate, \'panel-danger\': interview.current.status === \'IN_PROGRESS\' && interview.current.candidate}"> <div class="panel-heading"> <h3 class="panel-title pull-left">{{ interview.current.recruiter.company.name }}</h3> <p class="pull-right"> <code>&nbsp;{{ interview.location.name }}&nbsp;</code> </p> <div class="clearfix"></div> </div> <div class="panel-body"> <span ng-if="interview.current.status === \'IN_PROGRESS\' && interview.current.candidate"> <strong>{{ interview.current.candidate.firstname }} {{ interview.current.candidate.lastname }}</strong> </span> <span class="text-success" ng-if="interview.current.status === \'COMPLETED\' || !interview.current.candidate"> <i class="fa fa-exclamation-triangle fa-fw"></i> <strong>LIBRE</strong> </span> </div> <div class="panel-footer"> <strong>Suivant(e) </strong> à {{ apiInterviews.nextSlot.begins_at }} : <span ng-if="interview.next.candidate"> {{ interview.next.candidate.firstname }} {{ interview.next.candidate.lastname }} </span> <span ng-if="!interview.next.candidate"><strong>LIBRE</strong></span> </div> </div> </div> </slide> </carousel> <div id="pagination_wrapper" ng-if="apiInterviews.interviews.length"> <div id="pagination"> &copy; SeekYourJob 2016 - Réalisation web Valentin Polo & Nicolas Ducom. </div> </div> </div> </div>'),
a.put("views/admin/locations.html",'<h2>Emplacements</h2> <div class="row"> <div id="locationsBookingSummary" class="col-md-6" ng-repeat="booking in bookings"> <div class="booking"> <div class="panel-heading"><code>&nbsp;{{ booking.name }}&nbsp;</code> &nbsp; {{ booking.description }}</div> <table class="table"> <thead> <tr> <th ng-repeat="slot in booking.bookings" style="width: {{(1/booking.bookings.length)*100}}%">{{ slot.begins_at }}</th> </tr> </thead> <tbody> <tr> <td ng-repeat="interview in booking.bookings" ng-class="{free: !interview.interview, taken: interview.interview}"> <p ng-if="interview.interview"> <a ui-sref="app.admin.recruiters.details({id: interview.interview.recruiter.ido})">{{ interview.interview.recruiter.company }}</a> </p> </td> </tr> </tbody> </table> </div> </div> </div>'),a.put("views/admin/messaging-newEmail.html",'<h2><a ui-sref="app.admin.messaging">Messagerie</a> - Nouvel email</h2> <div class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">Type d\'envoi</label> <div class="col-sm-9"> <div class="radio"> <label> <input type="radio" value="toUsers" ng-model="sendingType" ng-required="!sendingType"> Envoyer à un (ou des) utilisateur(s) particulier(s) </label> </div> <div class="radio"> <label> <input type="radio" value="toGroups" ng-model="sendingType" ng-required="!sendingType"> Envoyer à un (ou des) groupe(s) </label> </div> </div> </div> <br><br> <div class="form-group" ng-if="sendingType === \'toUsers\'"> <label class="col-sm-3 control-label">Destinataires(s)</label> <div class="col-sm-7"> <ui-select multiple ng-model="selected.users"> <ui-select-match placeholder="Choisir le(s) utilisateur(s)...">{{ $item.identity }} ({{ $item.email }})</ui-select-match> <ui-select-choices repeat="user.user_ido as user in users | filter: $select.search"> <div ng-bind-html="user.identity | highlight: $select.search"></div> <small> {{ user.profile }} </small> </ui-select-choices> </ui-select> </div> </div> <div class="form-group" ng-if="sendingType === \'toGroups\'"> <label class="col-sm-3 control-label">Destinataires(s)</label> <div class="col-sm-7"> <ui-select multiple ng-model="selected.groups"> <ui-select-match placeholder="Choisir le(s) groupe(s)...">{{ $item.name }}</ui-select-match> <ui-select-choices repeat="group.users as group in groups | filter: $select.search"> <div ng-bind-html="group.name | highlight: $select.search"></div> <small> {{ group.users.length }} personne(s) </small> </ui-select-choices> </ui-select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Objet</label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="message.object" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Message</label> <div class="col-sm-7"> <p style="margin-top: 6px; margin-bottom: 20px">Bonjour,</p> <textarea class="form-control" style="height: 210px" ng-model="message.content" ng-required="true">\n            </textarea><br> <p> Bien cordialement,<br> L\'équipe SeekYourJob de la FGES. </p> </div> </div> <br> <div class="form-group"> <div class="col-sm-16 col-sm-offset-3"> <button class="btn btn-lg btn-success" ng-click="sendEmail();" ng-disabled="!canBeSent()"> <i class="fa fa-paper-plane-o fa-fw"></i>&nbsp; Envoyer </button> </div> </div> </div>'),a.put("views/admin/messaging-newSMS.html",'<h2><a ui-sref="app.admin.messaging">Messagerie</a> - Envoyer un SMS</h2> <div class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">Type d\'envoi</label> <div class="col-sm-9"> <div class="radio"> <label> <input type="radio" value="toUsers" ng-model="sendingType" ng-required="!sendingType"> Envoyer à un (ou des) utilisateur(s) particulier(s) </label> </div> <div class="radio"> <label> <input type="radio" value="toGroups" ng-model="sendingType" ng-required="!sendingType"> Envoyer à un (ou des) groupe(s) </label> </div> </div> </div> <br><br> <div class="form-group" ng-if="sendingType === \'toUsers\'"> <label class="col-sm-3 control-label">Destinataires(s)</label> <div class="col-sm-7"> <ui-select multiple ng-model="selected.users"> <ui-select-match placeholder="Choisir le(s) utilisateur(s)...">{{ $item.identity }} ({{ $item.phone_formatted }})</ui-select-match> <ui-select-choices repeat="user.user_ido as user in users | filter: $select.search"> <div ng-bind-html="user.identity | highlight: $select.search"></div> <small> {{ user.profile }} </small> </ui-select-choices> </ui-select> </div> </div> <div class="form-group" ng-if="sendingType === \'toGroups\'"> <label class="col-sm-3 control-label">Destinataires(s)</label> <div class="col-sm-7"> <ui-select multiple ng-model="selected.groups"> <ui-select-match placeholder="Choisir le(s) groupe(s)...">{{ $item.name }}</ui-select-match> <ui-select-choices repeat="group.users as group in groups | filter: $select.search"> <div ng-bind-html="group.name | highlight: $select.search"></div> <small> {{ group.users.length }} personne(s) </small> </ui-select-choices> </ui-select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Message</label> <div class="col-sm-7"> <textarea class="form-control" style="height: 210px" ng-model="message" ng-required="true">\n            </textarea><br> <p>– SeekYourJob</p> </div> </div> <br> <div class="form-group"> <div class="col-sm-16 col-sm-offset-3"> <button class="btn btn-lg btn-success" ng-click="sendSMS();" ng-disabled="!canBeSent()"> <i class="fa fa-paper-plane-o fa-fw"></i>&nbsp; Envoyer </button> &nbsp;&nbsp; Crédit(s) SMS restant(s) : <strong>{{ remainingSMSCredits.remaining_sms }}.</strong> </div> </div> </div>'),a.put("views/admin/messaging-predefinedEmail.html",'<h2><a ui-sref="app.admin.messaging">Messagerie</a> - Emails prédéfinis</h2> <div class="col-md-8 col-md-offset-2"> <table class="table"> <thead> <tr> <th style="width: 75%">Intitulé</th> <th style="width: 25%"></th> </tr> </thead> <tbody> <tr ng-repeat="predefinedEmail in predefinedEmails"> <td style="vertical-align: middle">{{ predefinedEmail.title }}</td> <td> <button class="btn btn-success btn-sm" ng-click="sendPredefinedEmail(predefinedEmail.key)">Envoyer</button> </td> </tr> </tbody> </table> </div>'),a.put("views/admin/messaging-predefinedSMS.html",'<h2><a ui-sref="app.admin.messaging">Messagerie</a> - SMS prédéfinis</h2> <div class="col-md-8 col-md-offset-2"> <table class="table"> <thead> <tr> <th style="width: 75%">Intitulé</th> <th style="width: 25%"></th> </tr> </thead> <tbody> <tr ng-repeat="predefinedSMS in predefinedSMSs"> <td style="vertical-align: middle">{{ predefinedSMS.title }}</td> <td> <button class="btn btn-success btn-sm" ng-click="sendPredefinedSMS(predefinedSMS.key)">Envoyer</button> </td> </tr> </tbody> </table> </div>'),a.put("views/admin/messaging.html",'<h2>Messagerie</h2> <div id="messagingHome" class="row"> <div class="col-md-6"> <p class="sendingButtonWrapper"> <a ui-sref="app.admin.messaging.newEmail" class="btn btn-lg btn-success"> <i class="fa fa-envelope-o fa-fw"></i> Nouvel email </a> &nbsp;&nbsp;&nbsp;&nbsp; <a ui-sref="app.admin.messaging.predefinedEmail" class="btn btn-lg btn-success"> <i class="fa fa-envelope-o fa-fw"></i> Emails prédéfinis </a> </p> <h3>Derniers emails envoyés</h3> <hr> <p class="lead"> Aucun message trouvé. </p> </div> <div class="col-md-6"> <p class="sendingButtonWrapper"> <a ui-sref="app.admin.messaging.newSMS" class="btn btn-lg btn-success"> <i class="fa fa-mobile fa-fw"></i> Nouvel SMS </a> &nbsp;&nbsp;&nbsp;&nbsp; <a ui-sref="app.admin.messaging.predefinedSMS" class="btn btn-lg btn-success"> <i class="fa fa-mobile fa-fw"></i> SMS prédéfinis </a> </p> <h3>Derniers SMS envoyés</h3> <hr> <p class="lead"> Aucun message trouvé. </p> </div> </div>'),a.put("views/admin/recruiters-details.html",'<h2><strong>{{ recruiter.user.firstname }} {{ recruiter.user.lastname }}</strong></h2> <div class="row"> <div class="col-md-4"> <div class="row" style="margin-top: 35px"> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-body"> <p> Entreprise :<br><strong>{{ recruiter.company.name }}</strong> </p> </div> </div> </div> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-body"> <p> Téléphone :<br> <strong>{{ recruiter.user.phone_formatted }}</strong> </p> </div> </div> </div> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-body"> <p> Options : <span class="label" ng-class="{\'label-default\': !recruiter.parking_option, \'label-success\': recruiter.parking_option}">PARKING</span>&nbsp; <span class="label" ng-class="{\'label-default\': !recruiter.lunch_option, \'label-success\': recruiter.lunch_option}">REPAS</span><br><br> Notifications : <span class="label" ng-class="{\'label-default\': !recruiter.user.email_notifications, \'label-success\': recruiter.user.email_notifications}">EMAIL</span>&nbsp; <span class="label" ng-class="{\'label-default\': !recruiter.user.sms_notifications, \'label-success\': recruiter.user.sms_notifications}">SMS</span> </p> </div> </div> </div> </div> </div> <div class="col-md-8"> <div class="row"> <div class="col-md-12"> <table id="admin-display-interviews" class="table"> <thead> <tr> <th style="vertical-align: middle">Tous les entretiens</th> <th> <select class="form-control" ng-options="location.name for location in locations track by location.ido" ng-model="newLocationForAllInterviews" ng-change="updateLocationForAllInterviews()"> <option value="">Aucune</option> </select> </th> <th colspan="2"></th> </tr> <tr> <th style="width: 20%">Créneau</th> <th style="width: 15%">Zone</th> <th style="width: 40%">Candidat</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="interview in recruiterInterviews.interviews" class="interview interview-status-{{interview.status}}"> <td> {{ interview.slot.begins_at }} <i class="fa fa-arrow-right fa-fw"></i> {{ interview.slot.ends_at }} </td> <td> <select class="form-control" ng-options="location.name for location in locations track by location.ido" ng-model="interview.location" ng-change="updateLocationForInterview(interview, \'{{ interview }}\')"> <option value="">Aucune</option> </select> </td> <td> <span ng-if="interview.status === \'taken\'">{{ interview.candidate.firstname }} {{ interview.candidate.lastname }} – {{ interview.candidate.grade }}</span> <p ng-if="interview.status === \'free\'" class="text-center"><button type="button" class="btn btn-sm btn-primary" ng-click="bookInterview(interview)"><i class="fa fa-sign-in fa-fw"></i> Inscrire un étudiant</button></p> </td> <td class="actions"> <button type="button" class="btn btn-sm btn-danger" ng-if="interview.status === \'taken\'" ng-click="freeInterview(interview)"><i class="fa fa-times fa-fw"></i> Désinscrire l\'étudiant</button> <button type="button" class="btn btn-sm btn-danger" ng-if="interview.status === \'free\'" ng-click="deleteInterview(interview)"><i class="fa fa-times fa-fw"></i> Marquer comme indisponible</button> <button type="button" class="btn btn-sm btn-success" ng-if="interview.status === \'unavailable\'" ng-click="createInterview(interview)"><i class="fa fa-check-square-o fa-fw"></i> Marquer comme disponible</button> </td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="row" style="margin-top: 42px"> <div class="col-md-6"> <h3>Modifier</h3> <hr> <div class="row"> <div class="col-md-12"> <div class="row"> <div class="col-md-4"> <div class="form-group"> <label for="firstname">Prénom</label> <input type="text" class="form-control" id="firstname" ng-model="recruiter.user.firstname" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="lastname">Nom</label> <input type="text" class="form-control" id="lastname" ng-model="recruiter.user.lastname" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="company">Entreprise</label> <select id="company" class="form-control" ng-model="recruiter.company" ng-options="company.name for company in companies track by company.ido"> </select> </div> </div> <div class="col-md-4"> <div class="form-group"> <label>Adresse email</label> <input type="text" class="form-control" ng-model="recruiter.user.email" ng-model-options="{debounce: 550}"> </div> </div> <div class="col-md-4"> <div class="form-group"> <label>Téléphone</label> <input type="text" class="form-control" ng-model="recruiter.user.phone" ng-model-options="{debounce: 550}"> </div> </div> </div> </div> <div class="col-md-12" style="margin-top: 15px"> <div class="row"> <div class="col-md-4"> <div class="form-group"> <label for="firstname">Options</label> <div class="checkbox"> <label for="checkbox-parking"> <input type="checkbox" name="checkboxes" id="checkbox-parking" ng-model="recruiter.parking_option" ng-true-value="1" ng-false-value="0"> Parking </label> </div> <div class="checkbox"> <label for="checkbox-lunch"> <input type="checkbox" name="checkboxes" id="checkbox-lunch" ng-model="recruiter.lunch_option" ng-true-value="1" ng-false-value="0"> Repas </label> </div> </div> </div> <div class="col-md-4"> <div class="form-group"> <label for="firstname">Notifications</label> <div class="checkbox"> <label for="checkbox-email"> <input type="checkbox" name="checkboxes" id="checkbox-email" ng-model="recruiter.user.email_notifications" ng-true-value="1" ng-false-value="0"> Email </label> </div> <div class="checkbox"> <label for="checkbox-sms"> <input type="checkbox" name="checkboxes" id="checkbox-sms" ng-model="recruiter.user.sms_notifications" ng-true-value="1" ng-false-value="0"> SMS </label> </div> </div> </div> </div> </div> </div> <div class="row"> <p class="text-center" style="margin-top: 21px"> <button type="button" class="btn btn-success" ng-click="updateRecruiter()">Enregistrer</button> </p> </div> </div> <div class="col-md-6"> <h3>Documents</h3> <hr> <form name="documentsPartForm" class="form-block" novalidate> <div class="panel panel-default" ng-show="documents.length"> <table class="table table-striped table-hover"> <thead> <tr> <th>Documents</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="document in documents"> <td>{{ document.name | limitTo: 30 }}{{document.name.length > 30 ? \'...\' : \'\'}} </td> <td class="pull-right"> <button type="button" class="btn btn-success" ng-click="downloadDocument(document)"><span class="glyphicon glyphicon-edit"></span> Telecharger</button> <button type="button" class="btn btn-danger" ng-click="deleteDocument(document)"><span class="glyphicon glyphicon-trash"></span> Supprimer</button> </td> </tr> </tbody> </table> </div> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="true" ngf-allow-dir="false"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez les documents ou<br> cliquez ici pour les sélectionner.</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> </form> </div> </div> <script type="text/ng-template" id="selectStudentForInterviewModal.html"><div class="modal-header">\n        <h3 class="modal-title">Inscrire un étudiant à un entretien...</h3>\n    </div>\n    <div id="selectStudentForInterviewModal" class="modal-body">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <label class="col-md-3 control-label">Recruteur</label>\n                <div class="col-md-7">\n                    <p class="form-control-static">{{ recruiter.user.firstname }} {{ recruiter.user.lastname }} ({{ recruiter.company.name }})</p>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="col-md-3 control-label">Horaire</label>\n                <div class="col-md-7">\n                    <p class="form-control-static">de {{ selected.slot.begins_at }} à {{ selected.slot.ends_at }}</p>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="col-md-3 control-label">Étudiant</label>\n                <div class="col-md-7">\n                    <ui-select ng-model="selected.availableCandidate">\n                        <ui-select-match placeholder="Choisir un étudiant...">{{ $select.selected.user.firstname }} {{ $select.selected.user.lastname }} - {{ $select.selected.grade }}</ui-select-match>\n                        <ui-select-choices repeat="candidate in availableCandidates| filter: $select.search">\n                            <div ng-bind-html="candidate.user.firstname + \' \' + candidate.user.lastname | highlight: $select.search"></div>\n                            <small>\n                                {{ candidate.grade }} - {{ candidate.interviews.length }} entretien(s)\n                            </small>\n                        </ui-select-choices>\n                    </ui-select>\n                </div>\n            </div>\n        </div>\n\n        <table class="table" ng-if="selected.availableCandidate">\n            <thead>\n            <tr>\n                <th ng-repeat="slot in slots">{{ slot.begins_at_formatted }}</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n                <td ng-repeat="slot in slots" ng-class="{selectedSlot: selected.slot.ido == slot.ido}">\n                    {{ selected.availableCandidate.registered_slots_obfuscated[slot.ido] }}\n                    <span ng-if="!selected.availableCandidate.registered_slots_obfuscated[slot.ido]" class="free">Libre</span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-success" type="button" ng-disabled="!selected.availableCandidate" ng-click="doBookInterview()">Inscrire {{ selected.availableCandidate.user.firstname }}</button>\n    </div></script>'),a.put("views/admin/recruiters.html",'<h2>Recruteurs</h2> <div class="row" st-table="recruitersDisplayedCollection" st-safe-src="recruitersCollection"> <div class="searchBox"> <input class="form-control" type="search" placeholder="Rechercher..." st-search> </div> <div class="col-md-3 text-right"> <button class="btn btn-primary" ng-click="downloadRecruitersSchedules()">Télécharger les plannings</button> </div> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th style="width: 30%">Identité</th> <th style="width: 20%">Entreprise</th> <th style="width: 20%">Disponibilité</th> <th style="width: 15%">Options</th> </tr> </thead> <tbody> <tr ng-repeat="recruiter in recruitersDisplayedCollection | orderBy:[\'company.name\',\'user.lastname\']"> <td><a ui-sref="app.admin.recruiters.details({id: recruiter.ido})">{{recruiter.user.firstname}} {{ recruiter.user.lastname }}</a></td> <td><a ui-sref="app.admin.companies.details({id: recruiter.company.ido})">{{recruiter.company.name}}</a></td> <td> <span ng-if="recruiter.availability === \'ALL\'"><span class="label label-success">MATIN</span> &nbsp; <span class="label label-success">APRES-MIDI</span></span> <span ng-if="recruiter.availability === \'AM\'"><span class="label label-success">MATIN</span> &nbsp; <span class="label label-default">APRES-MIDI</span></span> <span ng-if="recruiter.availability === \'PM\'"><span class="label label-default">MATIN</span> &nbsp; <span class="label label-success">APRES-MIDI</span></span> </td> <td> <span class="label" ng-class="{\'label-default\': !recruiter.parking_option, \'label-success\': recruiter.parking_option}">PARKING</span> &nbsp; <span class="label" ng-class="{\'label-default\': !recruiter.lunch_option, \'label-success\': recruiter.lunch_option}">REPAS</span> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/admin/users.html","this is the user page!"),a.put("views/do-reset-password.html",'<div id="reset-password-box"> <h2>Réinitialiser mon mot de passe</h2> <div id="reset-password-form"> <form novalidate> <div class="form-group"> <label for="password">Nouveau mot de passe</label> <input type="password" class="form-control" id="password" ng-model="passwordReset.password"> </div> <div class="form-group"> <label for="password_confirmation">Confirmation</label> <input type="password" class="form-control" id="password_confirmation" ng-model="passwordReset.confirmation"> </div> <p class="text-center"> <button type="submit" class="btn btn-primary btn-lg" ng-click="doResetPassword()">Réinitialiser mon mot de passe</button> </p> </form> </div> </div>'),a.put("views/home.html",'<h1 class="text-center">Job Forum \'16 de la FGES</h1> <div class="row"> <div class="col-md-8 col-md-offset-2"> <p class="lead text-center" style="margin-top: 21px"> Cette année encore, l\'équipe SeekYourJob de la FGES organise son Job Forum ! Pendant une journée, les étudiants de la filière informatique participent à des entretiens avec de nombreuses entreprises réunies pour l\'occasion.<br><br> </p> <h2 class="text-center">Choisir un profil :</h2> </div> </div> <div id="profiles"> <div id="recruiter-profile" class="profile" ui-sref="app.registerRecruiter"> <div class="icon"></div> <h2>Recruteur</h2> <p> S\'inscrire en tant que recruteur pour<br><strong>faire passer et évaluer des entretiens</strong>. </p> </div> <div id="candidate-profile" class="profile" ui-sref="app.registerCandidate"> <div class="icon"></div> <h2>Candidat</h2> <p> S\'inscrire en tant que candidat pour<br><strong>passer des entretiens</strong>. </p> </div> </div>'),a.put("views/login.html",'<div id="login-box"> <h2>Se connecter</h2> <div id="login-icon"> <img src="images/login.13eee200.png"> </div> <div id="login-form"> <form novalidate> <div class="form-group"> <label for="email">Adresse email</label> <input type="email" class="form-control" id="email" ng-model="credentials.email"> </div> <div class="form-group"> <label for="password">Mot de passe</label> <input type="password" class="form-control" id="password" ng-model="credentials.password"> </div> <p><a ui-sref="app.resetPassword"><small>Mot de passe oublié ?</small></a></p> <button type="submit" class="btn btn-primary btn-lg" ng-click="login()">Se connecter</button> <p class="text-danger pull-right" style="margin-top: 40px" ng-if="badCredentials"><strong>Identifiants non reconnus.</strong></p> </form> </div> </div>'),a.put("views/participating-companies.html",'<div id="participatingCompanies"> <div class="row"> <div class="col-md-10 col-md-offset-1"> <p class="text-center" style="font-size: 84px"> Merci ! </p> <p class="text-center lead"> Merci à toutes les entreprises qui ont accepté notre invitation et <br>qui participent à ce Job Forum 2016 organisé par la filière informatique de la FGES ! </p> </div> </div> <div id="companiesLogos"> <p class="col-md-2" ng-repeat="company in companies" ng-if="company.logo_path" style="float:none; display:inline-block; vertical-align:middle"> <a href="{{ company.website }}" target="_blank"><img ng-src="{{ company.logo_path }}" style="max-height: 142px; max-width: 100%;"></a> </p> </div> </div>'),a.put("views/register-candidate.html",'<div id="register-user" class="register-page"> <div class="register-form"> <div class="register-title" style="margin-bottom: 42px"> <h2>S\'inscrire en tant que candidat</h2><br> <p> Afin de procéder à votre inscription, <strong>merci de compléter tous les champs</strong>.<br> </p> <p> <small>Astuce : dès qu\'une étape est validée sa couleur passe du <span class="customLabel blue">BLEUE</span> au <span class="customLabel green">VERT</span> !</small> </p> </div> <!-- Identifiants --> <form name="credentialPartForm" class="form-block" novalidate ng-class="{\'valid\': !form.emailAlreadyExists && credentialPartForm.$valid}"> <h4>Identifiants</h4> <p>Ces identifiants sont importants, ils vous permettront <strong>d\'accéder à la platefome, de visualiser les différentes offres proposées, de vous inscrire à des entretiens et au besoin d\'en annuler</strong>.</p> <div class="row" style="margin-top: 15px"> <div class="form-group col-md-6" ng-class="{\'has-error\': form.emailAlreadyExists}"> <label for="email">Adresse email<span class="required">*</span></label> <input type="email" class="form-control input-lg" id="email" name="email" ng-model="newCandidate.user.email" ng-change="checkDuplicateEmail()" ng-model-options="{debounce: 500}" ng-required="true"> <span class="help-block" ng-if="form.emailAlreadyExists"><strong>Cette adresse email est déjà utilisée !</strong></span> </div> <div class="form-group col-md-6"> <label for="password">Mot de passe<span class="required">*</span></label> <input type="password" class="form-control input-lg" id="password" name="password" ng-model="newCandidate.user.password" ng-required="true" ng-minlength="6"> <span class="help-block">On demande juste 6 caractères au moins :)</span> </div> </div> </form> <!-- Coordonnées --> <form name="contactInfoPartForm" class="form-block" novalidate ng-class="{\'valid\': contactInfoPartForm.$valid}"> <h4>Coordonnées</h4> <div class="row"> <div class="form-group col-md-6"> <label for="firstname">Prénom<span class="required">*</span></label> <input type="text" class="form-control" id="firstname" name="firstname" ng-model="newCandidate.user.firstname" ng-required="true"> </div> <div class="form-group col-md-6"> <label for="lastname">Nom<span class="required">*</span></label> <input type="text" class="form-control" id="lastname" name="lastname" ng-model="newCandidate.user.lastname" ng-required="true"> </div> <div class="form-group col-md-6"> <label for="phone">Téléphone portable<span class="required">*</span></label> <input type="text" class="form-control" id="phone" name="phone" ng-model="newCandidate.user.phone" ng-required="true" ng-pattern="/^[0-9 ]+$/" ng-minlength="10"> </div> <div class="form-group col-md-4"> <label for="grade">Promotion<span class="required">*</span></label> <select id="grade" class="form-control" data-ng-model="newCandidate.candidate.grade"> <option ng-repeat="grade in grades" value="{{grade}}">{{grade}}</option> </select> </div> </div> </form> <!-- Documents --> <form name="documentsPartForm" class="form-block" novalidate ng-class="{\'valid\': documentsPartForm.$valid}"> <h4>Curriculum</h4> <div class="alert alert-warning text-center" style="margin-top: 20px"> <p> <strong>Un CV est nécessaire pour vous inscrire à des entretiens.</strong><br> Il sera <strong>validé par l\'équipe</strong> puis <strong>transmis aux recruteurs</strong>. </p> </div> <p class="text-center"> </p> <p class="text-center"> <small>L\'impression des CVs étant laissée à l\'appréciation des recruteurs,<br>merci de vous munir de quelques exemplaires papier le Jour-J !</small> </p> <div class="row"> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="false" ngf-allow-dir="false" ngf-accept="\'application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" ng-if="!newCandidate.candidate.documents.length"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez votre CV ou cliquez ici...<br>(formats .doc, .docx et .pdf acceptés)</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> <div id="documentsSent" ng-if="newCandidate.candidate.documents.length"> <p><strong>Curriculum envoyé :</strong></p> <ul> <li ng-repeat="document in newCandidate.candidate.documents"> {{ document.name }} - <i class="fa fa-trash-o fa-fw text-danger" title="Supprimer ce curriculum" ng-click="deleteDocument(document)"></i> </li> </ul> </div> </div> </form> <p class="register-submit"> <button type="button" class="btn btn-lg btn-success" style="transition:all 0.3s linear" ng-click="register()" ng-disabled="!formsAreValid() || form.isBeingSubmitted || form.isSubmitted"> <span ng-if="!form.isBeingSubmitted && !form.isSubmitted">&nbsp;Je m\'inscris <i class="fa fa-chevron-right fa-fw"></i></span> <span ng-if="form.isBeingSubmitted && !form.isSubmitted"><i class="fa fa-cog fa-spin fa-fw"></i></span> <span ng-if="form.isSubmitted"><i class="fa fa-check fa-2x"></i></span> </button> </p> <p class="text-center text-danger" ng-if="!formsAreValid()"><small>Certains champs sont manquants et/ou invalides !</small></p> </div> </div>'),a.put("views/register-recruiter.html",'<div id="register-user" class="register-page"> <div class="register-form"> <div class="register-title" style="margin-bottom: 42px"> <h2>S\'inscrire en tant que recruteur</h2><br> <p> Vous souhaitez vous inscrire au Job Forum de l\'équipe SeekYourJob de la FGES et nous vous en remercions. Merci de compléter ces quelques champs qui, sauf mention contraire, <strong>sont tous requis</strong>.<br> </p> <p> <small>Astuce : dès qu\'une étape est validée sa couleur passe du <span class="customLabel blue">BLEUE</span> au <span class="customLabel green">VERT</span> !</small> </p> </div> <!-- Identifiants --> <form name="credentialPartForm" class="form-block" novalidate ng-class="{\'valid\': !form.emailAlreadyExists && credentialPartForm.$valid}"> <h4>Identifiants</h4> <p>Ces identifiants sont importants, ils vous permettront <strong>d\'accéder au planning de vos entretiens ainsi qu\'aux curriculums des candidats</strong>.</p> <div class="row" style="margin-top: 15px"> <div class="form-group col-md-6" ng-class="{\'has-error\': form.emailAlreadyExists}"> <label for="email">Adresse email<span class="required">*</span></label> <input type="email" class="form-control input-lg" id="email" name="email" ng-model="newRecruiter.user.email" ng-change="checkDuplicateEmail()" ng-model-options="{debounce: 500}" ng-required="true"> <span class="help-block" ng-if="form.emailAlreadyExists"><strong>Cette adresse email est déjà utilisée !</strong></span> </div> <div class="form-group col-md-6"> <label for="password">Mot de passe<span class="required">*</span></label> <input type="password" class="form-control input-lg" id="password" name="password" ng-model="newRecruiter.user.password" ng-required="true" ng-minlength="6"> <span class="help-block">On demande juste 6 caractères au moins :)</span> </div> </div> </form> <!-- Coordonnées --> <form name="contactInfoPartForm" class="form-block" novalidate ng-class="{\'valid\': contactInfoPartForm.$valid}"> <h4>Coordonnées</h4> <div class="row"> <div class="form-group col-md-4"> <label for="firstname">Prénom<span class="required">*</span></label> <input type="text" class="form-control" id="firstname" name="firstname" ng-model="newRecruiter.user.firstname" ng-required="true"> </div> <div class="form-group col-md-4"> <label for="lastname">Nom<span class="required">*</span></label> <input type="text" class="form-control" id="lastname" name="lastname" ng-model="newRecruiter.user.lastname" ng-required="true"> </div> <div class="form-group col-md-4"> <label for="phone">Téléphone<span class="required">*</span></label> <input type="text" class="form-control" id="phone" name="phone" ng-model="newRecruiter.user.phone" ng-required="true" ng-pattern="/^[0-9 ]+$/" ng-minlength="10"> </div> <div class="form-group col-md-6"> <label for="company">Société<span class="required">*</span></label> <input type="text" class="form-control" id="company" name="company" ng-model="newRecruiter.recruiter.company.name" typeahead="company for company in companies | filter:$viewValue | limitTo:8" ng-required="true"> </div> <div class="form-group col-md-6"> <label>Type de poste recherché<span class="required">*</span></label><br> <label class="checkbox-inline" ng-repeat="(jobType, enabled) in newRecruiter.recruiter.company.jobTypes"> <input type="checkbox" ng-model="newRecruiter.recruiter.company.jobTypes[jobType]"> {{ jobType }} </label> </div> </div> </form> <!-- Disponibilités --> <form name="availabilityPartForm" class="form-block" novalidate ng-class="{\'valid\': availabilityPartForm.$valid}"> <h4>Disponibilités</h4> <p>Cet évènement se déroule sur toute une journée mais peut-être ne disposez-vous pas d\'une telle disponibilité ! Ce n\'est pas un problème, indiquez ci-dessous vos créneaux disponibles :</p> <div class="row"> <div class="radio"> <label> <input type="radio" name="availability" id="all" value="all" ng-model="newRecruiter.recruiter.availability" ng-required="true"> Je serai présent(e) <strong>toute la journée</strong> ! </label> </div> <div class="radio"> <label> <input type="radio" name="availability" id="am" value="am" ng-model="newRecruiter.recruiter.availability" ng-required="true"> Je serai présent(e) <strong>le matin uniquement</strong>. </label> </div> <div class="radio"> <label> <input type="radio" name="availability" id="pm" value="pm" ng-model="newRecruiter.recruiter.availability" ng-required="true"> Je serai présent(e) <strong>l\'après-midi uniquement</strong>. </label> </div> </div> </form> <!-- Options --> <form name="optionsPartForm" class="form-block" novalidate ng-class="{\'valid\': optionsPartForm.$valid}"> <h4>Options</h4> <p>Peut-être aurez-vous besoin d\'une <strong>place de parking</strong> ou encore de <strong>manger en notre compagnie le midi</strong> ? Si tel était le cas, indiquez le ici :</p> <div class="row"> <div class="checkbox"> <label> <input type="checkbox" value="parking" ng-model="newRecruiter.recruiter.parkingOption"> Je souhaite disposer d\'une <strong>place de parking</strong>. </label> </div> <div class="checkbox"> <label> <input type="checkbox" value="lunch" ng-model="newRecruiter.recruiter.lunchOption"> Je souhaite profiter d\'un <strong>repas avec l\'équipe</strong>. </label> </div> </div> </form> <!-- Collaborateurs --> <div class="form-block" ng-class="{\'valid\': collaboratorsFormIsValid()}"> <h4>Collaborateurs</h4> <p><strong>Vous souhaitez venir à plusieurs ? C\'est encore mieux !</strong> Mais avant toute chose...</p> <form name="othersPartForm" class="row" novalidate> <div class="radio"> <label> <input type="radio" name="others" value="none" ng-model="form.others" ng-required="true"> Je participerai <strong>seul(e)</strong>. </label> </div> <div class="radio"> <label> <input type="radio" name="others" value="withData" ng-model="form.others" ng-required="true"> Je viendrai accompagné(e) et me charge de <strong>renseigner les informations de mes collaborateurs</strong> dès maintenant. </label> </div> <div class="radio"> <label> <input type="radio" name="others" value="withEmails" ng-model="form.others" ng-required="true"> Je viendrai accompagné(e) et <strong>indique l\'adresse email de mes collaborateurs</strong> afin de les inviter à s\'inscrire eux-mêmes. </label> </div> </form> <div class="row" ng-if="form.others !== \'\' && form.others !== \'none\'"> <hr> <div ng-if="form.others == \'withData\'"> <p>Saisissez une à une les informations des collaborateurs qui vous accompagneront :</p> <div class="row" style="margin-top: 24px"> <div class="form-group col-md-4"> <label for="collabFirstname">Prénom</label> <input type="text" class="form-control" id="collabFirstname" ng-model="form.dataRecruiterToAdd.firstname" ng-required="true"> </div> <div class="form-group col-md-4"> <label for="collabLastname">Nom</label> <input type="text" class="form-control" id="collabLastname" ng-model="form.dataRecruiterToAdd.lastname" ng-required="true"> </div> <div class="form-group col-md-4"> <label for="collabEmail">Adresse email</label> <input type="email" class="form-control" id="collabEmail" ng-model="form.dataRecruiterToAdd.email" ng-required="true"> </div> </div> <div class="row" style="margin-top: 10px"> <div class="form-group col-md-5"> <label>Disponibilités</label> <div class="radio"> <label> <input type="radio" name="collabAvailability" id="collabAvailability-all" value="all" checked ng-model="form.dataRecruiterToAdd.availability"> Toute la journée </label> </div> <div class="radio"> <label> <input type="radio" name="collabAvailability" id="collabAvailability-am" value="am" ng-model="form.dataRecruiterToAdd.availability"> Le matin uniquement </label> </div> <div class="radio"> <label> <input type="radio" name="collabAvailability" id="collabAvailability-pm" value="pm" ng-model="form.dataRecruiterToAdd.availability"> L\'après-midi uniquement </label> </div> </div> <div class="form-group col-md-7"> <label>Options</label> <div class="checkbox"> <label> <input type="checkbox" value="parkingOption" ng-model="form.dataRecruiterToAdd.parkingOption"> Souhaitera une place de parking </label> </div> <div class="checkbox"> <label> <input type="checkbox" value="lunchOption" ng-model="form.dataRecruiterToAdd.lunchOption"> Participera au repas avec l\'équipe </label> </div> </div> </div> <div class="row"> <p class="text-center"> <button class="btn btn-primary" ng-click="addRecruiterData()"><i class="fa fa-plus fa-fw"></i> Ajouter un collaborateur</button> </p> </div> <hr> <div class="form-group"> <label class="col-md-4 control-label">Collaborateur(s) ajouté(s)</label> <div class="col-md-7"> <ul id="recruitersDataAdded"> <li ng-if="!newRecruiter.participantsData.length">Aucun collaborateur</li> <li ng-if="newRecruiter.participantsData.length" ng-repeat="collab in newRecruiter.participantsData"> <strong>{{ collab.firstname }} {{ collab.lastname }}</strong> - {{ collab.email }}<br> <strong>Disponibilité</strong> : <span ng-switch="collab.availability"> <span ng-switch-when="all">toute la journée</span> <span ng-switch-when="am">le matin uniquement</span> <span ng-switch-when="pm">l\'après-midi uniquement</span> </span> <br> <strong>Options</strong> : <span ng-if="!collab.parkingOption && !collab.lunchOption" class="label label-default">AUCUNE</span> <span ng-if="collab.parkingOption" class="label label-success">PARKING</span> <span ng-if="collab.lunchOption" class="label label-default">REPAS</span> <br> <a class="text-danger" ng-click="deleteRecruiterData(collab)">Supprimer</a> </li> </ul> </div> </div> </div> <div ng-if="form.others == \'withEmails\'"> <p>Saisissez une à une les adresses emails des collaborateurs à prévenir :</p> <div class="form-horizontal" style="margin-top: 24px"> <div class="form-group"> <label class="col-md-4 control-label">Adresse email</label> <div class="col-md-7"> <div class="input-group"> <input type="email" class="form-control" placeholder="Saisir une adresse email..." ng-model="form.emailRecruiterToAdd" ng-keydown="$event.which === 13 && addRecruiterEmail()"> <span class="input-group-btn"> <button class="btn btn-primary" type="button" ng-click="addRecruiterEmail()">Ajouter</button> </span> </div> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">Adresse(s) ajoutée(s)</label> <div class="col-md-7"> <ul id="recruitersEmailsAdded"> <li ng-if="!newRecruiter.participantsEmails.length">Aucune adresse</li> <li ng-if="newRecruiter.participantsEmails.length" ng-repeat="email in newRecruiter.participantsEmails"> {{ email }} - <i class="fa fa-trash-o fa-fw" title="Supprimer cette adresse email" ng-click="deleteRecruiterEmail(email)"></i> </li> </ul> </div> </div> </div> </div> </div> </div> <!-- Documents --> <form name="documentsPartForm" class="form-block" novalidate ng-class="{\'valid\': documentsPartForm.$valid}"> <h4>Documents</h4> <p>Afin de correspondre au mieux aux profils des candidats, n\'hésitez pas à envoyer des exemples d\'annonces ici (formats .doc, .docx et .pdf acceptés).</p> <div class="row"> <div ngf-drop ng-model="form.documents" class="dropbox" ngf-select="true" ngf-multiple="true" ngf-allow-dir="false" ngf-accept="\'application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\'"> <div class="help"> <span ng-if="!form.documentIsBeingSent">Glissez-déposez vos documents ou<br> cliquez ici pour les sélectionner.</span> <span ng-if="form.documentIsBeingSent">Envoi en cours...</span> </div> </div> <div ngf-no-file-drop>Cette fonctionnalité n\'est pas disponible sur votre navigateur</div> <div id="documentsSent" ng-if="newRecruiter.recruiter.documents.length"> <p><strong>Document(s) envoyé(s) :</strong></p> <ul> <li ng-repeat="document in newRecruiter.recruiter.documents"> {{ document.name }} - <i class="fa fa-trash-o fa-fw text-danger" title="Supprimer ce document" ng-click="deleteDocument(document)"></i> </li> </ul> </div> </div> </form> <p class="register-submit"> <button type="button" class="btn btn-lg btn-success" style="transition:all 0.3s linear" ng-click="register()" ng-disabled="!formsAreValid() || form.isBeingSubmitted || form.isSubmitted"> <span ng-if="!form.isBeingSubmitted && !form.isSubmitted">Je m\'inscris <i class="fa fa-chevron-right fa-fw"></i></span> <span ng-if="form.isBeingSubmitted && !form.isSubmitted"><i class="fa fa-cog fa-spin fa-fw"></i></span> <span ng-if="form.isSubmitted"><i class="fa fa-check fa-2x"></i></span> </button> </p><p class="text-center text-danger" ng-if="!formsAreValid()"><small>Certains champs sont manquants ou invalides</small></p>  </div> </div>'),
a.put("views/reset-password.html",'<div id="reset-password-box"> <h2>Mot de passe oublié</h2> <div id="reset-password-form"> <form novalidate> <div class="form-group"> <label for="email">Adresse email</label> <input type="email" class="form-control" id="email" ng-model="credentials.email"> </div> <p class="text-center"> <button type="submit" class="btn btn-primary btn-lg" ng-click="resetPassword()">Réinitialiser mon mot de passe</button> </p> </form> </div> </div>'),a.put("views/skeleton/footer.html",'<footer> <div class="container"> <div class="row"> <div class="col-xs-7" style="padding-top: 42px"> <p> <a ui-sref="app.accessMap">Plan d\'accès</a> &nbsp; | &nbsp; <a href="mailto:seekyourjob@myfges.fr">Contact</a> </p> <p> La journée de Job Forum est un évènement proposé par l\'équipe SeekYourJob de la FGES.<br> </p><br> <p> <a class="footer-brand" href="http://jobforum.myfges.fr" target="_blank" style="margin-right: 42px"> <img src="/images/logo-small.261c485c.png"> </a> <a class="footer-brand" href="http://www.rizomm.fr" target="_blank"> <img src="/images/rizomm-logo.c537619a.png"> </a> </p> </div> <div class="col-xs-5" style="height: 250px"> <div class="footer-banner"> <h3 class="footer-title">L\'équipe SeekYourJob</h3> <ul> <li><em>Management : </em>Hugo Drécourt, Valentin Pare,</li> <li><em>Développement : </em>Nicolas Ducom, Valentin Polo</li> <li><em>Organisation : </em>Guillaume Viart, Steven Dieu</li> </ul> </div> </div> </div> </div> </footer>'),a.put("views/skeleton/header.html",'<div class="header"> <div class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" ui-sref="app.home">Job Forum de la FGES</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li ng-if="authenticated"><a ui-sref="app.account">Connecté(e) en tant que {{ user.firstname }} {{ user.lastname }}</a></li> <li ng-if="authenticated"><a ui-sref="app.logout">Se déconnecter</a></li> <li ng-if="!authenticated"> <a id="loginHeaderLink" ui-sref="app.login"><strong>Déjà inscrit ? Je me connecte ici !</strong></a> </li> </ul> <button ng-if="user.organizer === true" type="button" class="btn btn-primary navbar-btn navbar-right" ui-sref="app.admin.home">Administration</button> </div> </div> </div> </div>')}]);